<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Deployment trigger -->
<script src="/public/websocket-interceptor.js" defer></script>
<style>
  @import url(https://fonts.googleapis.com/css?family=Google+Sans+Text);
  html {
    font-family: 'Google Sans Text', 'Google Sans';
    font-size: 14px;
    color-scheme: light dark;
    background: light-dark(white, black);
    color: light-dark(black, white);
  }
</style>

<script type="importmap">{"imports":{"@modelcontextprotocol/sdk/":"https://aistudiocdn.com/@modelcontextprotocol/sdk/dist/esm/","https://aistudiocdn.com/@modelcontextprotocol/sdk@^1.11.0/es2022/":"https://aistudiocdn.com/@modelcontextprotocol/sdk@^1.11.0/es2022/dist/esm/","https://aistudiocdn.com/@modelcontextprotocol/sdk@^1.11.0/client/index?target=es2022":"https://aistudiocdn.com/@modelcontextprotocol/sdk@^1.11.0/dist/esm/client/index?target=es2022","https://aistudiocdn.com/@modelcontextprotocol/sdk@^1.11.0/types?target=es2022":"https://aistudiocdn.com/@modelcontextprotocol/sdk@^1.11.0/dist/esm/types?target=es2022","react":"https://aistudiocdn.com/react@^18.2.0","react-dom/":"https://aistudiocdn.com/react-dom@^18.2.0/","react/":"https://aistudiocdn.com/react@^18.2.0/"}}</script>
<script type="module">
  const geminiUrl = window.location.origin + '/api-proxy';

  window.API_KEY = 'UNUSED_PLACEHOLDER_FOR_API_KEY';
  window.GEMINI_API_KEY = 'UNUSED_PLACEHOLDER_FOR_API_KEY';
  window.process = window.process || {};
  window.process.env = window.process.env || {};
  window.process.env.API_KEY = window.API_KEY;
  window.process.env.GEMINI_API_KEY = window.GEMINI_API_KEY;
</script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Linkle</title>
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://linkle.fun">
  <meta property="og:title" content="Linkle - Daily Word Puzzle Game">
  <meta property="og:description" content="Connect words in this daily free puzzle game!">
  <meta property="og:image" content="https://linkle.fun/linkle-meta-image-1200x630.png">
  <meta property="og:site_name" content="Linkle">

  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://linkle.fun">
  <meta name="twitter:title" content="Linkle - Daily Word Puzzle Game">
  <meta name="twitter:description" content="Connect words in this daily free puzzle game!">
  <meta name="twitter:image" content="https://linkle.fun/linkle-meta-image-1200x630.png">

  <!-- Standard Description -->
  <meta name="description" content="Connect words in this daily free puzzle game!">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Antonio:wght@700&family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --grid-unit: 8px;
      --border-radius: 6px;
      --font-display: 'Antonio', sans-serif;
      --font-ui: 'Poppins', sans-serif;
      --shadow-depth: 6px;
    }
    
    body[data-theme='light'] {
      --background-color: #f6e6d9;
      --header-text: #3b422e;
      --primary-text: #3b422e;
      --tagline-text: #3b422e;
      --subtle-text: #7a7392;
      --input-bg: #E9E2FF;
      --input-border: #3b422e;
      --box-bg-normal: #FFFFFF;
      --box-text-normal: #3b422e;
      --box-bg-locked: #9eef80;
      --box-text-locked: #3b422e;
      --button-bg: #b0a4fb;
      --button-text: #3b422e;
      --button-shadow: #8981bd;
      --tile-shadow-normal: #8981bd;
      --tile-shadow-locked: #81c269;
      --tries-dot-color: #b0a4fb;
      --gunmetal: #7a7392;
      --light-text-static: #f7f2ec;
      --bar-border: rgba(59, 66, 46, 0.2);
      --bg-pattern-color: hsla(255, 60%, 95%, 1);
      --bg-dot-color: hsla(255, 28%, 15%, 0.15);
      /* Legacy shadows - keeping for compatibility or removing if unused */
      --box-shadow-float-color: hsla(255, 10%, 15%, 0.1);
      --box-shadow-highlight-color: hsla(0, 0%, 100%, 0.4);
      --box-shadow-inset-color: hsla(255, 10%, 15%, 0.1);
      --box-shadow-float-color-hover: hsla(255, 10%, 15%, 0.25);
      --placeholder-border-color: hsla(255, 10%, 15%, 0.3);
      --achievement-color: #ff914d;
      --difficulty-impossible-bg: #ff5757;
    }

    body[data-theme='dark'] {
      --background-color: #3b422e;
      --header-text: #f6e6d9;
      --primary-text: #f6e6d9;
      --tagline-text: #f6e6d9;
      --subtle-text: #7a7392;
      --input-bg: #7a7392;
      --input-border: #f6e6d9;
      --box-bg-normal: #7a7392;
      --box-text-normal: #FFFFFF;
      --box-bg-locked: #9eef80;
      --box-text-locked: #3b422e;
      --button-bg: #b0a4fb;
      --button-text: #3b422e;
      --button-shadow: #8981bd;
      --tile-shadow-normal: #8981bd;
      --tile-shadow-locked: #81c269;
      --tries-dot-color: #b0a4fb;
      --bar-border: rgba(246, 230, 217, 0.2);
      --box-shadow-float-color: hsla(0, 0%, 0%, 0.2);
      --box-shadow-highlight-color: hsla(0, 0%, 100%, 0.1);
      --box-shadow-inset-color: hsla(0, 0%, 0%, 0.2);
      --box-shadow-float-color-hover: hsla(0, 0%, 0%, 0.4);
      --placeholder-border-color: hsla(255, 20%, 65%, 0.3);
      /* Colors that don't change */
      --gunmetal: #7a7392;
      --light-text-static: #f7f2ec;
      --achievement-color: #ff914d;
      --difficulty-impossible-bg: #ff5757;
    }

    /* Achievement and avatar icon colors - match background colors */
    .achievement-icon svg path[fill="#b3a7fe"],
    .avatar-button svg path[fill="#b3a7fe"] {
      fill: #f6e6d9;
    }
    body[data-theme='dark'] .achievement-icon svg path[fill="#b3a7fe"],
    body[data-theme='dark'] .achievement-icon svg path[fill="#7a7392"],
    body[data-theme='dark'] .avatar-button svg path[fill="#b3a7fe"],
    body[data-theme='dark'] .avatar-button svg path[fill="#7a7392"] {
      fill: #3b422e;
    }
    
    /* Dark mode icon shadow colors */
    body[data-theme='dark'] .achievement-icon svg path[fill="#2D2A32"],
    body[data-theme='dark'] .avatar-button svg path[fill="#2D2A32"] {
      fill: #5a5372;
    }
    
    * {
      box-sizing: border-box;
    }

    html {
      background-color: var(--background-color); 
    }

    body {
      font-family: var(--font-ui);
      background-color: var(--background-color);
      min-height: 100dvh;
      color: var(--primary-text);
      margin: 0;
      padding: 0 calc(var(--grid-unit) * 5); /* 40px */
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    
    body.dragging-active {
      touch-action: none;
      overscroll-behavior: none;
    }

    #root {
      width: 100%;
      max-width: calc(var(--grid-unit) * 63); /* 504px */
      margin: 0 auto;
      text-align: left;
      min-height: 100dvh; /* Ensure root takes full viewport height */
      display: flex;
      flex-direction: column;
    }

    .app-wrapper {
        display: flex;
        flex-direction: column;
        justify-content: center; /* Vertically center content on mobile/tablet */
        min-height: 100dvh;
        padding-bottom: calc(var(--grid-unit) * 9 + env(safe-area-inset-bottom)); /* 72px */
    }
    
    .main-content {
        flex: 1 0 auto;
        display: flex;
        flex-direction: column;
    }

    /* New Firebase Config Warning Style */
    #firebase-config-warning {
      background-color: #ffc;
      border: 1px solid #e6db55;
      color: #333;
      padding: calc(var(--grid-unit) * 1.25) calc(var(--grid-unit) * 2);
      border-radius: var(--grid-unit);
      font-size: 0.8rem;
      text-align: center;
      margin: calc(var(--grid-unit) * 2.5) 0;
      display: none; /* Hidden by default */
    }

    #firebase-config-warning a {
      color: #0056b3;
      font-weight: bold;
    }

    .app-container {
      position: relative;
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
      padding: calc(var(--grid-unit) / 2) 0;
    }
    
    .ghost-tile {
      position: fixed;
      pointer-events: none;
      z-index: 1000;
      opacity: 0.9;
      transform: scale(1.05);
      box-shadow: 0 var(--grid-unit) calc(var(--grid-unit) * 2.5) rgba(0,0,0,0.2);
    }

    /* --- Start Screen --- */
    .start-screen-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        min-height: 100dvh; /* Ensure full viewport height for vertical centering */
        box-sizing: border-box;
    }
    .start-screen-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
    }
    .start-screen-container .header {
        margin-top: 0;
        margin-bottom: 0;
        color: var(--header-text);
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .mini-grid-wrapper {
        background-color: #282828;
        padding: 4px;
        border-radius: var(--border-radius);
        width: 100%;
        max-width: 100px;
        margin-bottom: calc(var(--grid-unit) * 3);
        box-sizing: border-box;
        transition: background-color 0.3s ease;
    }
    .mini-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 4px;
    }
    .mini-grid-tile {
        aspect-ratio: 1 / 1;
        background-color: #00bf63;
        border-radius: calc(var(--border-radius) / 2);
    }
    .mini-grid-tile.highlight {
        background-color: #9379E6;
    }
    .start-screen-buttons {
        display: flex;
        flex-direction: column;
        gap: var(--grid-unit);
        margin-top: calc(var(--grid-unit) * 5);
    }
    .start-screen-interaction {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
    }
    .welcome-back-message {
      color: var(--primary-text);
      font-family: var(--font-ui);
      font-size: 1.1rem;
      font-weight: 500;
      padding: 0;
      text-align: center;
      margin: 0;
      margin-top: calc(var(--grid-unit) * 2);
    }
    .start-screen-container .tagline {
        color: var(--tagline-text);
        margin-top: var(--grid-unit);
        font-weight: 400;
        text-align: center;
        text-transform: none;
    }
    .start-screen-container .button {
        font-size: 1.5rem;
        padding: calc(var(--grid-unit) * 1.5) calc(var(--grid-unit) * 4);
        background-color: transparent;
        color: var(--button-text);
        position: relative;
        display: block; /* Ensure block display for pseudo-elements */
        overflow: visible;
        box-shadow: none;
        border-radius: 0; /* No radius on parent - let ::after control it */
        transition: transform 0.1s ease;
        isolation: isolate; /* Create new stacking context */
        min-height: 3em; /* Ensure button has height for pseudo-elements */
    }
    
    /* Face (with shimmer for default button) */
    .start-screen-container .button::after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        width: 100%;
        height: 100%;
        background-color: var(--button-bg);
        background-image: linear-gradient(120deg, transparent 40%, rgba(255, 255, 255, 0.4) 50%, transparent 60%);
        background-size: 200% 100%;
        background-position: 200% 0;
        background-repeat: no-repeat;
        border-radius: 16px !important; /* Face radius - 16px */
        transform: translateZ(0); /* Force hardware acceleration */
        z-index: 1;
        transition: background-position 0.7s ease-in-out, background-color 0.2s ease;
    }

    /* Shadow */
    .start-screen-container .button::before {
        content: '';
        position: absolute;
        top: var(--shadow-depth);
        left: 0;
        width: 100%;
        height: 100%;
        background: none; 
        background-color: var(--button-shadow);
        transform: none;
        border-radius: 100px;
        z-index: 0;
        transition: background-color 0.2s ease, transform 0.1s ease;
    }

    /* Ensure text inside button appears above pseudo-elements */
    .start-screen-container .button > * {
        position: relative;
        z-index: 2;
    }

    /* Ensure Link components (rendered as <a> tags) work correctly */
    .start-screen-container a.button {
        display: block !important;
        text-decoration: none !important;
        isolation: isolate !important; /* Ensure stacking context */
        position: relative !important;
        /* Debug: add visible border */
        /* border: 2px solid red !important; */
    }

    /* Force pseudo-elements to show for Link buttons */
    .start-screen-container a.button::after {
        content: '' !important;
        display: block !important;
        position: absolute !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        width: 100% !important;
        height: 100% !important;
        background: #2962FF !important; /* Force blue color directly */
        background-image: linear-gradient(120deg, transparent 40%, rgba(255, 255, 255, 0.4) 50%, transparent 60%) !important;
        background-size: 200% 100% !important;
        background-position: 200% 0 !important;
        background-repeat: no-repeat !important;
        border-radius: 16px !important;
        transform: translateZ(0) !important;
        z-index: 1 !important;
        pointer-events: none !important;
    }

    .start-screen-container a.button::before {
        content: '' !important;
        position: absolute !important;
        top: 10px !important; /* Force shadow depth */
        left: 0 !important;
        width: 100% !important;
        height: 100% !important;
        background: #0039CB !important; /* Force shadow color directly */
        border-radius: 100px !important;
        z-index: 0 !important;
        pointer-events: none !important;
    }

    .start-screen-container .button.button-outline {
        background-color: transparent;
        color: #2E2E2E;
    }
    .start-screen-container .button.button-outline::after {
        display: block;
        background-color: #b0a4fb;
        background-image: none;
        border-radius: 16px !important; /* Face radius - 16px */
    }
    .start-screen-container .button.button-outline::before {
        background-color: #8981bd;
    }

    body[data-theme='dark'] .start-screen-container .button.button-outline {
        color: #3b422e;
    }
    body[data-theme='dark'] .start-screen-container .button.button-outline::after {
        display: block;
        background-color: #b0a4fb;
        border-radius: 16px !important; /* Face radius - 16px */
    }
    body[data-theme='dark'] .start-screen-container .button.button-outline::before {
        background-color: #8981bd;
    }

    .start-screen-container .button.button-signup {
        background-color: transparent;
        color: #2E2E2E;
    }
    .start-screen-container .button.button-signup::after {
        display: block;
        background-color: #b3a7fe;
        background-image: none;
        border-radius: 16px !important; /* Face radius - 16px */
    }
    .start-screen-container .button.button-signup::before {
        background-color: #7E57C2;
    }
    
    .start-screen-container .button:active {
        transform: translateY(var(--shadow-depth)) !important;
        box-shadow: none !important;
    }
    .start-screen-container .button:active::before {
        transform: translateY(calc(var(--shadow-depth) * -1));
    }

    @media (hover: hover) and (pointer: fine) {
      .start-screen-container .button:hover {
        transform: translateY(-2px);
      }
      .start-screen-container .button:hover::after {
        background-position: -100% 0;
      }
      .start-screen-container .button:hover::before {
         /* No shadow change needed? Or maybe adjust? */
         /* If parent lifts, shadow lifts. We want shadow on ground. */
         /* So shadow transform down relative to parent. */
         transform: translateY(2px);
      }
    }


    /* --- Top Bar & Bottom Bar --- */
    .top-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-top: calc(var(--grid-unit) / 2);
        padding-bottom: calc(var(--grid-unit));
        padding-left: 0;
        padding-right: 0;
        flex-shrink: 0;
    }

    .top-bar.start-screen-header {
        justify-content: center;
    }
    
    .top-bar .logo {
        justify-self: start;
        font-size: 1.0rem;
    }

    .top-bar .utility-group {
        display: none;
    }

    .logo {
      font-size: 0.9rem;
      color: var(--primary-text);
      font-family: var(--font-ui);
    }
    
    .logo-bold {
      font-weight: 700;
      letter-spacing: -1.2px;
    }
    
    .logo-regular {
       font-weight: 400;
    }

    .top-bar .logo-is-graphic svg {
      height: 1.5rem; /* 24px */
      width: auto;
      display: block;
      position: relative;
      top: 2px;
    }

    .score-display-group {
        display: flex;
        align-items: center;
        font-family: var(--font-ui);
        gap: calc(var(--grid-unit) / 2);
    }

    .user-display {
      display: flex;
      align-items: center;
    }
    
    .avatar-button {
      background: none;
      border: none;
      padding: 0;
      margin: 0;
      cursor: pointer;
      border-radius: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .avatar-button:focus-visible {
      outline: 2px solid var(--button-bg);
      outline-offset: 2px;
    }
    .avatar-button svg {
      width: 1.5em;
      height: 1.5em;
    }

    .auth-button {
      background: none;
      border: none;
      font-family: var(--font-ui);
      font-weight: 700;
      font-size: 0.8rem;
      color: var(--header-text);
      cursor: pointer;
      text-transform: none;
    }

    .total-score {
      font-family: var(--font-display);
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--header-text);
      margin-right: var(--grid-unit);
    }
    
    .streak-icon {
      width: 1.5rem;
      height: 1.5rem;
      position: relative;
    }

    .streak-score-text {
      font-family: var(--font-display);
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--header-text);
    }
    
    .bottom-bar {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: var(--background-color);
        border-top: 1px solid var(--bar-border);
        z-index: 100;
    }

    .bottom-bar-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        max-width: calc(var(--grid-unit) * 63); /* 504px */
        margin: 0 auto;
        padding: var(--grid-unit) calc(var(--grid-unit) * 5) calc(var(--grid-unit) + env(safe-area-inset-bottom));
    }
    
    .bottom-bar .theme-toggle {
        width: 2.2rem;
        height: 2.2rem;
        color: var(--header-text);
        cursor: pointer;
        line-height: 1;
        user-select: none;
        transition: transform 0.2s ease, color 0.3s ease;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }
    .bottom-bar .achievement-icon {
        cursor: pointer;
        user-select: none;
        transition: transform 0.2s ease;
    }
    .bottom-bar .achievement-icon svg {
        width: 0.9rem;
        height: 0.9rem;
    }
    .bottom-bar .theme-toggle:hover {
        transform: scale(1.1);
    }
    .bottom-bar .auth-button {
        font-size: 0.8rem;
    }
    .bottom-bar .avatar-button svg {
        width: 1.5em;
        height: 1.5em;
    }

    .achievement-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: color 0.3s ease;
      color: var(--header-text);
    }
    .achievement-icon svg {
        width: 0.9rem;
        height: 0.9rem;
        overflow: visible;
    }
    .achievement-medal-star {
        transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        transform-origin: center;
    }
    .achievement-icon:hover .achievement-medal-star {
        transform: rotate(15deg) scale(1.1);
    }

    .theme-toggle svg {
      width: 100%;
      height: 100%;
    }

    .header {
      font-family: var(--font-display);
      font-weight: 700;
      font-size: 4.8rem;
      line-height: 0.9;
      letter-spacing: -4px;
      margin: 0;
      margin-top: calc(var(--grid-unit) * 2);
      color: var(--header-text);
      text-transform: uppercase;
      text-align: left;
    }

    .header svg {
      width: 100%;
      height: auto;
      max-width: 192px;
    }

    .tagline {
      font-family: var(--font-ui);
      font-weight: 400;
      font-size: 1.92rem;
      margin: 0;
      color: var(--tagline-text);
      margin-top: calc(var(--grid-unit) * 2);
      letter-spacing: 0.5px;
      line-height: 1.1;
    }
    
    .game-header-info {
        display: flex;
        justify-content: flex-start;
        align-items: baseline;
        gap: var(--grid-unit);
        margin-top: calc(var(--grid-unit) * 4);
        margin-bottom: calc(var(--grid-unit) * 3.5);
        transition: opacity 0.3s ease;
    }
    
    .state-solved .game-header-info,
    .state-generating .game-header-info {
      opacity: 0;
    }

    .game-board-wrapper {
      position: relative;
      display: flex;
      flex-direction: column;
    }

    .loader-text {
        font-family: var(--font-ui);
        font-weight: 700;
        font-size: 1.5rem;
        color: var(--header-text);
        position: absolute;
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
        transition: opacity 0.3s ease-in-out;
        white-space: nowrap;
    }

    .solution-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--grid-unit);
      margin-top: 0px;
      position: relative;
      z-index: 2;
      width: 100%;
      transition: opacity 0.3s ease-in-out;
      perspective: 1000px;
    }
    
    .word-card {
      background-color: transparent;
      color: var(--box-text-normal);
      border: none; /* Removed border - using pseudo-element approach */
      aspect-ratio: 1 / 1;
      border-radius: 0; /* No radius on parent - let ::after control it */
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: var(--font-display);
      font-weight: 700;
      font-size: 1.2rem;
      letter-spacing: -0.5px;
      text-transform: uppercase;
      cursor: grab;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      -webkit-touch-callout: none;
      touch-action: none;
      position: relative;
      overflow: visible;
      box-shadow: none;
      transition: transform 0.1s ease, opacity 0.4s ease, color 0.2s ease;
      opacity: 0;
      transform: scale(0.9) translateY(10px);
      z-index: 1;
    }

    /* The Face */
    .word-card::after {
      content: '';
      position: absolute;
      inset: 0;
      background-color: var(--box-bg-normal);
      border-radius: 12px; /* Face radius - 12px */
      z-index: -1;
      transition: background-color 0.2s ease;
    }
    
    /* Bonus mode red tiles */
    .bonus-mode .word-card:not(.locked):not(.revealed)::after {
      background-color: #ff5757;
    }
    .bonus-mode .word-card:not(.locked):not(.revealed)::before {
      background-color: #cc4646;
    }
    
    /* Bonus mode time pressure overlay */
    .bonus-time-pressure-overlay {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      width: 100%;
      /* Background color set dynamically via inline style */
      z-index: 0; /* Behind all content but above background */
      pointer-events: none;
      transition: height 0.1s linear, background-color 0.3s ease;
    }
    
    /* Ensure app-container and its content are above the overlay */
    .main-content {
      position: relative;
      z-index: 1;
    }
    
    /* Bonus Splash Screen */
    .bonus-splash-container {
      width: 100%;
      min-height: 100vh; /* Fallback for older browsers */
      min-height: 100dvh; /* Modern browsers - accounts for mobile browser UI */
      display: flex;
      align-items: center;
      justify-content: center;
      padding: var(--grid-unit);
      background-color: var(--background-color);
    }

    .bonus-splash-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: calc(var(--grid-unit) * 4);
      animation: bonusSplashEnter 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    }

    .bonus-splash-svg {
      max-width: 90vw;
      width: 100%;
    }

    .bonus-splash-svg svg {
      width: 100%;
      height: auto;
    }

    /* Red PLAY button for bonus splash - 50% bigger than DailyStartScreen button */
    .bonus-splash-play-button {
      /* 50% bigger font and padding */
      font-size: 2.25rem; /* 1.5rem * 1.5 */
      padding: calc(var(--grid-unit) * 2.25) calc(var(--grid-unit) * 6); /* 1.5 * 1.5 = 2.25, 4 * 1.5 = 6 */
      
      /* Core button styling */
      background-color: transparent !important;
      color: #FFFFFF !important;
      border: none !important;
      position: relative !important;
      display: inline-block !important;
      overflow: visible !important;
      box-shadow: none !important;
      cursor: pointer !important;
      
      /* Typography */
      font-family: var(--font-display) !important;
      font-weight: 700 !important;
      text-transform: uppercase !important;
      letter-spacing: 0.05em !important;
      
      /* Layout */
      isolation: isolate !important;
      transition: transform 0.1s ease !important;
    }

    /* Face with 16px border radius (red) */
    .bonus-splash-play-button::after {
      content: '' !important;
      display: block !important;
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      width: 100% !important;
      height: 100% !important;
      
      /* Red face color with shimmer */
      background-color: #ff5757 !important;
      background-image: linear-gradient(120deg, transparent 40%, rgba(255, 255, 255, 0.4) 50%, transparent 60%) !important;
      background-size: 200% 100% !important;
      background-position: 200% 0 !important;
      background-repeat: no-repeat !important;
      
      /* 16px border radius on face */
      border-radius: 16px !important;
      
      z-index: 1 !important;
      pointer-events: none !important;
      transition: background-position 0.7s ease !important;
    }

    /* Shadow (darker red) */
    .bonus-splash-play-button::before {
      content: '' !important;
      display: block !important;
      position: absolute !important;
      top: 10px !important;
      left: 0 !important;
      width: 100% !important;
      height: 100% !important;
      
      /* Darker red shadow */
      background-color: #e7191f !important;
      
      border-radius: 100px !important;
      z-index: 0 !important;
      pointer-events: none !important;
      transition: transform 0.1s ease !important;
    }

    /* Text above pseudo-elements */
    .bonus-splash-play-button > span {
      position: relative !important;
      z-index: 2 !important;
    }

    /* Hover state */
    @media (hover: hover) and (pointer: fine) {
      .bonus-splash-play-button:hover {
        transform: translateY(-2px) !important;
      }
      .bonus-splash-play-button:hover::after {
        background-position: -100% 0 !important;
      }
      .bonus-splash-play-button:hover::before {
        transform: translateY(2px) !important;
      }
    }

    /* Active/pressed state */
    .bonus-splash-play-button:active {
      transform: translateY(10px) !important;
    }
    .bonus-splash-play-button:active::before {
      transform: translateY(-10px) !important;
    }

    @keyframes bonusSplashEnter {
      0% {
        transform: scale(0.5);
        opacity: 0;
      }
      60% {
        transform: scale(1.1);
        opacity: 1;
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    /* The Shadow (Chunky) */
    .word-card::before {
      content: '';
      position: absolute;
      top: var(--shadow-depth);
      left: 0;
      width: 100%;
      height: 100%;
      background-color: var(--tile-shadow-normal);
      border-radius: 24px; /* Independent radius for chunky look */
      z-index: -2;
      transition: background-color 0.2s ease, transform 0.1s ease;
    }

    .word-card > span {
      position: relative;
      z-index: 1;
      top: -0.1em;
    }
    button > span {
      position: relative;
      top: -0.1em;
    }

    @media (hover: hover) and (pointer: fine) {
      body:not(.dragging-active) .word-card:not(.locked):not(.revealed):hover {
          transform: translateY(-2px);
      }
      body:not(.dragging-active) .word-card:not(.locked):not(.revealed):hover::before {
          transform: translateY(2px);
      }
    }
    
    body:not(.dragging-active) .word-card:not(.locked):not(.revealed):active {
        transform: translateY(var(--shadow-depth));
    }
    body:not(.dragging-active) .word-card:not(.locked):not(.revealed):active::before {
        transform: translateY(calc(var(--shadow-depth) * -1));
    }
    
    .word-card.dragging {
        opacity: 0.8;
        transform: scale(1.05);
        z-index: 100;
    }
    
    .word-card.placeholder {
        background-color: transparent;
        color: transparent;
        box-shadow: none;
        border: 2px dashed var(--placeholder-border-color);
    }
    .word-card.placeholder::before, .word-card.placeholder::after {
        display: none;
    }
    
    /* Override for bonus mode - placeholder should be completely blank (no red background) */
    .bonus-mode .word-card.placeholder:not(.locked):not(.revealed)::before,
    .bonus-mode .word-card.placeholder:not(.locked):not(.revealed)::after {
        display: none !important; /* Hide red background and shadow completely */
    }
    .bonus-mode .word-card.placeholder:not(.locked):not(.revealed) {
        background-color: transparent !important;
        color: transparent !important; /* Hide text */
        border: 2px dashed rgba(255, 87, 87, 0.5) !important; /* Red dashed border */
        box-shadow: none !important;
    }
    
    /* Ghost tile in bonus mode should be red */
    .ghost-tile.word-card.bonus-mode::after {
        background-color: #ff5757 !important;
    }
    .ghost-tile.word-card.bonus-mode::before {
        background-color: #cc4646 !important;
    }
    .ghost-tile.word-card.bonus-mode {
        background-color: transparent !important;
    }

    .word-card.locked {
      color: var(--box-text-locked);
      cursor: not-allowed;
      box-shadow: none;
      background-color: transparent !important; /* Prevent any background from showing */
    }
    .word-card.locked::after {
      background-color: var(--box-bg-locked);
      border-radius: 12px; /* Ensure consistent face radius */
    }
    .word-card.locked::before {
      background-color: var(--tile-shadow-locked);
    }
    
    .word-card.revealed {
      color: var(--box-text-locked);
      opacity: 0;
      cursor: default;
      animation-fill-mode: forwards;
      transform: scale(1);
      box-shadow: none;
      background-color: transparent !important; /* Prevent any background from showing */
    }
    .word-card.revealed::after {
      background-color: var(--box-bg-locked);
      border-radius: 12px; /* Ensure consistent face radius */
    }
    .word-card.revealed::before {
      background-color: var(--tile-shadow-locked);
    }
    
    .word-card.revealed.win {
      animation-name: scramble-settle;
      animation-duration: 1.2s;
      animation-timing-function: cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .word-card.revealed.loss {
      animation-name: reveal-loss-dynamic;
      animation-duration: 1.2s;
      animation-timing-function: ease-out;
    }

    .word-card.revealed.win:nth-child(1) { animation-delay: 0.0s; }
    .word-card.revealed.win:nth-child(2) { animation-delay: 0.05s; }
    .word-card.revealed.win:nth-child(3) { animation-delay: 0.1s; }
    .word-card.revealed.win:nth-child(4) { animation-delay: 0.15s; }
    .word-card.revealed.win:nth-child(5) { animation-delay: 0.2s; }
    .word-card.revealed.win:nth-child(6) { animation-delay: 0.25s; }
    .word-card.revealed.win:nth-child(7) { animation-delay: 0.3s; }
    .word-card.revealed.win:nth-child(8) { animation-delay: 0.35s; }
    .word-card.revealed.win:nth-child(9) { animation-delay: 0.4s; }
    
    .word-card.revealed.loss:nth-child(1) { animation-delay: 0.1s; }
    .word-card.revealed.loss:nth-child(2) { animation-delay: 0.15s; }
    .word-card.revealed.loss:nth-child(3) { animation-delay: 0.2s; }
    .word-card.revealed.loss:nth-child(4) { animation-delay: 0.25s; }
    .word-card.revealed.loss:nth-child(5) { animation-delay: 0.3s; }
    .word-card.revealed.loss:nth-child(6) { animation-delay: 0.35s; }
    .word-card.revealed.loss:nth-child(7) { animation-delay: 0.4s; }
    .word-card.revealed.loss:nth-child(8) { animation-delay: 0.45s; }
    .word-card.revealed.loss:nth-child(9) { animation-delay: 0.5s; }

    @keyframes scramble-settle {
      0% {
        opacity: 0;
        transform: translate(var(--tx, 0), var(--ty, 0)) rotate(var(--rot, 0)) scale(0.5);
        color: var(--win-start-text-color);
      }
      60% {
        opacity: 1;
        transform: translate(calc(var(--tx, 0) / 2), calc(var(--ty, 0) / 2)) rotate(calc(var(--rot, 0) / 3)) scale(1.1);
        color: var(--win-mid-text-color);
      }
      100% {
        opacity: 1;
        transform: translate(0, 0) rotate(0) scale(1);
        color: var(--box-text-locked);
      }
    }
    @keyframes reveal-loss-dynamic {
      0% {
        opacity: 0;
        transform: translate(var(--loss-tx), var(--loss-ty)) rotate(var(--loss-rot)) scale(0.8);
        color: var(--loss-start-text-color);
      }
      50% {
        opacity: 1;
        transform: translate(calc(var(--loss-tx) / 2), calc(var(--loss-ty) / 2)) rotate(calc(var(--loss-rot) / 2)) scale(1.1);
        color: var(--loss-mid-text-color);
      }
      100% {
        opacity: 1;
        transform: translate(0,0) rotate(0) scale(1);
        color: var(--box-text-locked);
      }
    }

    .feedback-container {
      min-height: calc(var(--grid-unit) * 2.5); /* 20px */
    }
    
    .feedback-text {
      color: var(--header-text);
      font-weight: 500;
      font-size: 0.8rem;
    }
    
    .feedback-text.animating {
      animation: shake 0.3s;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    .solution-grid.grid-shake {
      animation: grid-shake 0.4s cubic-bezier(.36,.07,.19,.97);
    }
    @keyframes grid-shake {
      10%, 90% {
        transform: translate3d(-1px, 0, 0);
      }
      20%, 80% {
        transform: translate3d(2px, 0, 0);
      }
      30%, 50%, 70% {
        transform: translate3d(-3px, 0, 0);
      }
      40%, 60% {
        transform: translate3d(3px, 0, 0);
      }
    }

    .footer-controls {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--grid-unit);
      align-items: center;
    }

    .tries-container {
      grid-column: span 2;
      display: flex;
      align-items: center;
      gap: var(--grid-unit);
      color: var(--primary-text);
      font-family: var(--font-display);
      font-weight: 700;
      font-size: 1.2rem;
      line-height: 1;
      text-transform: uppercase;
    }

    .footer-controls .feedback-container {
      grid-column: span 2;
    }

    .bonus-timer {
      display: flex;
      align-items: center;
      justify-content: center;
      color: #ff5757;
      font-family: var(--font-display);
      font-weight: 700;
      font-size: 1.8rem;
      line-height: 1;
    }
    
    .bonus-timer-text {
      color: #ff5757;
      font-weight: 700;
    }

    .tries-container > span {
      position: relative;
      top: 1px;
      font-family: var(--font-ui);
      font-size: 1.1rem;
      font-weight: 700;
    }

    .help-trigger {
      position: absolute;
      right: 0;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      align-items: center;
      gap: 0.4em;
      background: none;
      border: none;
      padding: 0;
      cursor: pointer;
      font-family: var(--font-ui);
      font-size: 1rem;
      font-weight: 500;
      color: var(--header-text);
    }

    .help-trigger .help-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 1.4em;
      height: 1.4em;
      border-radius: 50%;
      border: 1.5px solid currentColor;
      font-size: 0.9em;
      font-weight: 600;
    }

    .help-trigger:hover {
      opacity: 0.7;
    }
    
    .tries-dots-visual {
        display: flex;
        gap: calc(var(--grid-unit) / 2);
    }
    .dot {
        width: calc(var(--grid-unit) * 2);
        height: calc(var(--grid-unit) * 2);
        border-radius: 50%;
        border: 2px solid var(--box-bg-locked);
        transition: all 0.2s ease-in-out;
    }
    .dot.active {
        background-color: var(--box-bg-locked);
        transform: scale(1.1);
    }
    
    .button-group {
      grid-column: 3 / 4;
    }

    .button-group .button {
      width: 100%;
      text-align: center;
      padding-left: calc(var(--grid-unit) * 1.5);
      padding-right: calc(var(--grid-unit) * 1.5);
    }
    
    /* Disable mobile tap highlight on all button types */
    .button,
    .button-outline,
    .day-card-share-button,
    .day-card-play-button,
    .avatar-button,
    .achievement-button {
      -webkit-tap-highlight-color: transparent;
    }

    .button {
      padding: calc(var(--grid-unit) * 1.5) calc(var(--grid-unit) * 3);
      border: none;
      border-radius: 0; /* No radius on parent - let ::after control it */
      background-color: transparent;
      color: var(--button-text);
      font-family: var(--font-display);
      font-weight: 700;
      font-size: 1.1rem;
      cursor: pointer;
      text-transform: uppercase;
      transition: transform 0.1s ease, filter 0.2s ease;
      white-space: nowrap;
      box-shadow: none;
      margin-bottom: var(--shadow-depth);
      position: relative;
      overflow: visible; /* Allow ::after to extend */
      z-index: 1;
    }

    /* Face */
    .button::after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100%;
      height: 100%;
      background-color: var(--button-bg);
      border-radius: 16px !important; /* Face radius - 16px */
      transform: translateZ(0); /* Force hardware acceleration */
      z-index: -1;
      transition: background-color 0.2s ease;
    }

    /* Shadow */
    .button::before {
      content: '';
      position: absolute;
      top: var(--shadow-depth);
      left: 0;
      width: 100%;
      height: 100%;
      background-color: var(--button-shadow);
      border-radius: 100px; /* Pill Shadow */
      z-index: -2;
      transition: background-color 0.2s ease, transform 0.1s ease;
    }

    .button > span {
      position: relative;
      z-index: 1;
      top: -0.1em;
    }

    .button:active {
      transform: translateY(var(--shadow-depth));
    }
    .button:active::before {
      transform: translateY(calc(var(--shadow-depth) * -1));
    }

    .button.button-submit {
      color: var(--button-text);
    }
    .button.button-submit::after {
      background-color: var(--button-bg);
    }

    .button.button-primary {
      color: var(--button-text);
    }
    .button.button-primary::after {
      background-color: var(--button-bg);
      border-radius: 8px !important; /* Face radius - 8px */
    }
    
    .button-secondary {
       color: var(--button-text);
       border: none;
    }
    .button-secondary::after {
       background-color: var(--button-bg);
    }
    
    .button-bonus {
       color: #FFFFFF;
       border: none;
    }
    .button-bonus::after {
       background-color: #ff5757;
       border-radius: 16px !important;
    }
    .button-bonus::before {
       background-color: #cc4646;
       border-radius: 100px;
    }
    
    .logic-narrative {
        font-family: var(--font-ui);
        font-weight: 400;
        color: var(--primary-text);
        line-height: 2;
        font-size: 0.9rem;
    }
    
    .logic-narrative b {
        font-family: var(--font-ui);
        font-weight: 700;
        font-style: normal;
        color: var(--box-text-locked);
        background-color: var(--box-bg-locked);
        padding: 0.1em 0.4em 0.05em;
        border-radius: 4px;
        font-size: 1em;
        text-transform: uppercase;
        white-space: nowrap;
        position: relative;
        top: -0.05em;
    }
    
    .solved-feedback-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transform: scale(0.5);
      min-height: calc(var(--grid-unit) * 5); /* 40px */
      position: relative;
      padding: var(--grid-unit) 0;
    }

    .solved-feedback-text {
      font-family: var(--font-ui);
      font-weight: 500;
      font-size: 0.85rem;
      line-height: 1.4;
      text-align: center;
      display: flex;
      flex-direction: column;
      gap: 1px;
      color: var(--primary-text);
    }
    
    .solved-feedback-container.win .solved-feedback-text {
      color: var(--tagline-text);
    }

    .solved-feedback-container.loss .solved-feedback-text {
      color: var(--header-text);
    }

    .state-solved .solved-feedback-container {
      animation: pop-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 1.7s forwards, shake 0.5s 2.2s;
    }

    .state-solved .solved-feedback-container.loss {
      animation: pop-in 0.5s ease-out 1.4s forwards, shake 0.5s 1.9s;
    }

    @keyframes pop-in {
      to { transform: scale(1); opacity: 1; }
    }

    /* --- State Transition Styles --- */
    .gameplay-ui,
    .solved-ui,
    .solution-grid {
      transition: opacity 0.3s ease-in-out;
    }

    .state-playing .solved-ui,
    .state-generating .solved-ui,
    .state-generating .gameplay-ui,
    .state-solved .gameplay-ui {
        opacity: 0;
        pointer-events: none;
    }
    
    .state-generating .word-card:not(.revealed) {
      opacity: 0;
    }

    .state-generating .word-card.revealed {
      animation: drop-and-fade-out 0.3s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards;
    }

    .state-generating .word-card.revealed:nth-child(1) { animation-delay: 0.15s; }
    .state-generating .word-card.revealed:nth-child(2) { animation-delay: 0.05s; }
    .state-generating .word-card.revealed:nth-child(3) { animation-delay: 0.2s; }
    .state-generating .word-card.revealed:nth-child(4) { animation-delay: 0s; }
    .state-generating .word-card.revealed:nth-child(5) { animation-delay: 0.1s; }
    .state-generating .word-card.revealed:nth-child(6) { animation-delay: 0.05s; }
    .state-generating .word-card.revealed:nth-child(7) { animation-delay: 0.1s; }
    .state-generating .word-card.revealed:nth-child(8) { animation-delay: 0.2s; }
    .state-generating .word-card.revealed:nth-child(9) { animation-delay: 0.15s; }


    .state-playing .gameplay-ui,
    .state-playing .solution-grid,
    .state-solved .solution-grid,
    .state-solved .solved-ui {
        opacity: 1;
        pointer-events: auto;
    }
    
    /* Loader state */
    .loader-text {
        opacity: 0;
        pointer-events: none;
    }
    .state-generating .loader-text {
        opacity: 1;
        transition-delay: 0.5s;
    }


    .bottom-content-container {
      display: grid;
      flex-shrink: 0;
      width: 100%;
    }
    .bottom-content-container > * {
      grid-area: 1 / 1;
    }

    .solved-ui {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .solved-buttons {
      display: flex;
      justify-content: center;
      gap: var(--grid-unit);
      opacity: 0;
      width: 100%;
      margin-top: calc(var(--grid-unit) / 2);
    }

    .state-solved .solved-buttons {
        animation: fade-in 0.4s ease 2.2s forwards;
    }
    
    .solved-buttons .button {
      flex: 1;
      padding-top: calc(var(--grid-unit) * 1.5);
      padding-bottom: calc(var(--grid-unit) * 1.5);
      padding-left: var(--grid-unit);
      padding-right: var(--grid-unit);
      text-align: center;
      font-size: 1rem;
    }

    .button-outline {
      background-color: transparent;
      color: #2E2E2E;
      border: none; /* Removed border - using pseudo-element approach */
    }

    .button-outline::after {
      background-color: #E9E2FF; /* Light lavender/off-white face */
      background-image: none;
      border-radius: 16px !important; /* Face radius - 16px */
    }

    .button-outline::before {
      background-color: #BDBDBD; /* Gray shadow */
    }

    body[data-theme='dark'] .button-outline {
        background-color: transparent;
        color: #3b422e;
    }

    body[data-theme='dark'] .button-outline::after {
        background-color: #f6e6d9;
        border-radius: 16px !important; /* Face radius - 16px */
    }

    body[data-theme='dark'] .button-outline::before {
        background-color: #949494;
    }

    body[data-theme='dark'] .start-screen-container .button.button-outline {
        background-color: transparent;
        color: #3b422e;
    }


    /* --- New Animations --- */
    .screen-shake-win {
      animation: screen-shake-win 0.5s cubic-bezier(.36,.07,.19,.97) both;
    }
    .screen-shake-loss {
      animation: screen-shake-loss 0.3s linear both;
    }
    @keyframes screen-shake-win {
      10%, 90% { transform: translate3d(-1px, 0, 0); }
      20%, 80% { transform: translate3d(2px, 0, 0); }
      30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
      40%, 60% { transform: translate3d(4px, 0, 0); }
    }
    @keyframes screen-shake-loss {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-6px); }
      40%, 80% { transform: translateX(6px); }
    }
    
    @keyframes drop-and-fade-out {
      from {
        opacity: 1;
        transform: translateY(0);
      }
      to {
        opacity: 0;
        transform: translateY(80px);
      }
    }

    @keyframes fade-in-up-staggered {
      from {
        opacity: 0;
        transform: translateY(16px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .initial-play-animation .header,
    .initial-play-animation .tagline {
      opacity: 0;
      animation: fade-in-up-staggered 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
    }

    .initial-play-animation .tagline {
      animation-delay: 0.15s;
    }
    
    .state-playing .word-card {
      opacity: 1;
      transform: scale(1);
      /* Use longhand properties to isolate the staggered delay to opacity.
         This keeps the cool fade-in effect while ensuring the transform
         (which controls the hover scale) is always immediate and responsive. */
      transition-property: transform, opacity;
      transition-duration: 0.2s, 0.4s;
      transition-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94), ease;
    }
    .state-playing .word-card:nth-child(1) { transition-delay: 0s, 0.1s; }
    .state-playing .word-card:nth-child(2) { transition-delay: 0s, 0.13s; }
    .state-playing .word-card:nth-child(3) { transition-delay: 0s, 0.16s; }
    .state-playing .word-card:nth-child(4) { transition-delay: 0s, 0.19s; }
    .state-playing .word-card:nth-child(5) { transition-delay: 0s, 0.22s; }
    .state-playing .word-card:nth-child(6) { transition-delay: 0s, 0.25s; }
    .state-playing .word-card:nth-child(7) { transition-delay: 0s, 0.28s; }
    .state-playing .word-card:nth-child(8) { transition-delay: 0s, 0.31s; }
    .state-playing .word-card:nth-child(9) { transition-delay: 0s, 0.34s; }


    .confetti-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        pointer-events: none;
        z-index: 9999;
        overflow: hidden;
    }
    .confetti {
        position: absolute;
        width: 8px;
        height: 16px;
        top: -20px;
        opacity: 0;
        animation-name: confetti-fall;
        animation-timing-function: linear;
        animation-iteration-count: 1;
        animation-fill-mode: forwards;
    }
    @keyframes confetti-fall {
      0% {
        transform: translateY(0) translateX(0) rotateZ(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(110vh) translateX(var(--horizontal-drift)) rotateZ(720deg);
        opacity: 0;
      }
    }

    .loser-emoji-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        pointer-events: none;
        z-index: 9999;
        overflow: hidden;
    }
    .loser-emoji {
        position: absolute;
        top: -50px;
        opacity: 0;
        animation-name: emoji-fall;
        animation-timing-function: linear;
        animation-iteration-count: 1;
        animation-fill-mode: forwards;
    }
    @keyframes emoji-fall {
      0% {
        transform: translateY(0) translateX(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(110vh) translateX(var(--horizontal-drift)) rotate(720deg);
        opacity: 0;
      }
    }

    /* --- Difficulty Tag --- */
    .difficulty-tag {
      font-family: var(--font-display);
      font-weight: 700;
      font-size: 1.1rem;
      letter-spacing: -0.5px;
      text-transform: capitalize;
      opacity: 0;
      transform: translateY(10px);
      color: var(--primary-text);
      display: flex;
      align-items: center;
      gap: calc(var(--grid-unit) * 0.75);
    }
    .state-playing .difficulty-tag {
        animation: fade-in-up 0.7s ease 0.9s forwards;
    }
    .difficulty-indicator {
        width: calc(var(--grid-unit) * 1.5);
        height: calc(var(--grid-unit) * 1.5);
        border-radius: 50%;
    }
    .difficulty-tag span {
        position: relative;
        top: -0.1em;
    }
    @keyframes fade-in-up {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .difficulty-tag.easy .difficulty-indicator {
      background-color: var(--box-bg-locked);
    }
    .difficulty-tag.hard .difficulty-indicator {
      background-color: var(--achievement-color);
    }
    .difficulty-tag.impossible .difficulty-indicator {
      background-color: var(--difficulty-impossible-bg);
    }

    /* --- Auth, Badge & Modal System --- */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      animation: fade-in 0.3s ease;
    }

    .modal-content {
      background: var(--background-color);
      padding: calc(var(--grid-unit) * 3); /* 24px */
      border-radius: var(--border-radius);
      width: 90%;
      max-width: 340px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      border: 2px solid var(--primary-text);
      animation: slide-up 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      text-align: center;
      position: relative;
    }
    
    .modal-content h2 {
      margin-top: 0;
      margin-bottom: calc(var(--grid-unit) / 2);
      color: var(--header-text);
    }

    .modal-subtitle {
        font-size: 0.9rem;
        color: var(--primary-text);
        margin: 0 0 calc(var(--grid-unit) * 8);
        text-align: left;
    }
    
    /* --- New Player Tutorial Modal --- */
    .new-player-modal {
      text-align: center;
      max-width: 340px;
    }
    
    .new-player-modal h2 {
      text-align: center;
      margin-bottom: 1rem;
    }
    
    .new-player-modal p {
      font-size: 1rem;
      line-height: 1.5;
      margin: 0 0 1rem 0;
      text-align: center;
    }
    
    .new-player-tagline {
      margin-bottom: 1.25rem;
    }
    
    .new-player-modal .button {
      width: 100%;
    }
    
    /* --- Bottom Sheet for Achievements --- */
    .modal-overlay.is-sheet {
      align-items: flex-end; /* Pin to bottom */
      background: rgba(0, 0, 0, 0.5); 
    }

    .modal-overlay.is-sheet > .achievement-sheet {
      animation: slide-in-from-bottom 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .achievement-sheet {
      background: var(--background-color);
      width: 100%;
      max-width: 100%; /* Full width on mobile */
      height: 85vh;
      border-top-left-radius: calc(var(--border-radius) * 2);
      border-top-right-radius: calc(var(--border-radius) * 2);
      box-shadow: 0 -5px 30px rgba(0,0,0,0.2);
      
      display: flex;
      flex-direction: column;
      padding: calc(var(--grid-unit) * 2) calc(var(--grid-unit) * 3) calc(var(--grid-unit) * 3);
      text-align: left;
      position: relative;
      transform: translateY(0);
      transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
      touch-action: none;
      user-select: none;
    }
    
    /* Achievement sheet background in light mode */
    body[data-theme='light'] .achievement-sheet {
      background: #f6e6d9;
    }
    
    .achievement-sheet:not(.is-dragging) {
      user-select: none;
    }

    .sheet-drag-handle {
      width: 40px;
      height: 4px;
      background-color: var(--bar-border);
      border-radius: 2px;
      position: absolute;
      top: 8px;
      left: 50%;
      transform: translateX(-50%);
    }

    .achievement-sheet h2 {
      margin: 0;
    }

    .achievement-sheet .modal-subtitle {
      font-size: 1rem;
      line-height: 1.5;
      margin: 12px 0;
      color: var(--primary-text);
    }

    @keyframes slide-in-from-bottom {
      from { transform: translateY(100%); }
      to { transform: translateY(0); }
    }

    .achievement-sheet h2,
    .achievement-sheet .modal-subtitle {
      text-align: left;
      flex-shrink: 0;
    }

    .achievement-sheet .achievement-scroll-container {
      flex: 1 1 auto;
      overflow-y: auto;
      min-height: 0;
      padding-right: var(--grid-unit);
      touch-action: pan-y;
      overscroll-behavior: contain;
      border-top: 1px solid var(--bar-border);
      padding-top: 12px;
    }

    .explanation-modal .logic-narrative {
      text-align: left;
    }
    
    @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slide-up { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

    .modal-close-button {
        position: absolute;
        top: calc(var(--grid-unit) * 1.5);
        right: calc(var(--grid-unit) * 1.5);
        width: calc(var(--grid-unit) * 3);
        height: calc(var(--grid-unit) * 3);
        padding: 0;
        background: transparent;
        border: none;
        cursor: pointer;
        color: var(--primary-text);
        transition: transform 0.2s ease, color 0.2s ease;
        z-index: 10;
    }

    .modal-close-button:hover {
        transform: scale(1.1);
    }

    .modal-close-button:focus-visible {
        outline: 2px solid var(--button-bg);
        outline-offset: 2px;
        border-radius: 50%;
    }
    
    .auth-modal .modal-close-button {
        color: #EAEAEA;
    }

    .auth-modal .modal-close-button:focus-visible {
        outline-color: #eddec9;
    }

    .modal-close-button svg {
        width: 100%;
        height: 100%;
    }


    .badge-unlock-modal h2 {
      font-size: 1.2rem;
      color: var(--header-text);
      text-transform: uppercase;
      margin: 0 0 var(--grid-unit);
    }
    .badge-unlock-modal h3 {
        font-size: 1.5rem;
        margin: calc(var(--grid-unit) / 2) 0;
        color: var(--header-text);
    }
    .badge-unlock-modal p {
      font-size: 0.9rem;
      color: var(--primary-text);
      margin: 0 0 calc(var(--grid-unit) * 2);
    }
    .badge-unlocked-icon {
      /* Changed from emoji text to image */
      width: 80px;
      height: 80px;
      object-fit: contain;
      animation: pop-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s forwards;
      transform: scale(0);
      opacity: 0;
    }
    
    /* Badge sign-up prompt for guests */
    .badge-signup-prompt {
      margin: calc(var(--grid-unit) * 2) 0 0;
      padding: calc(var(--grid-unit) * 1.5);
      background: rgba(0, 0, 0, 0.05);
      border-radius: var(--border-radius);
    }
    
    [data-theme="dark"] .badge-signup-prompt {
      background: rgba(255, 255, 255, 0.05);
    }
    
    .badge-signup-text {
      font-size: 0.85rem;
      color: var(--primary-text);
      margin: 0 0 calc(var(--grid-unit) * 1.5);
      opacity: 0.8;
    }

    .achievement-section {
        margin-top: 32px;
    }

    .achievement-section:first-of-type {
        margin-top: 0;
    }

    .achievement-section-header {
        font-family: var(--font-display);
        font-weight: 700;
        font-size: 1.8rem;
        text-align: left;
        color: var(--primary-text);
        margin-bottom: 32px;
        text-transform: uppercase;
        letter-spacing: -1px;
    }

    .achievement-category-header {
      font-family: var(--font-ui);
      font-weight: 700;
      font-size: 0.8rem;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      text-align: left;
      color: var(--primary-text);
      margin: 32px 0 24px;
      padding-bottom: var(--grid-unit);
      border-bottom: 1px solid var(--bar-border);
    }

    .achievement-section .achievement-category:first-of-type .achievement-category-header {
        margin-top: var(--grid-unit);
    }


    .badge-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(88px, 1fr));
        gap: 32px;
    }
    
    .badge {
      text-align: center;
      background: none;
      border: none;
      padding: 0;
      font: inherit;
      color: inherit;
      cursor: pointer;
      border-radius: var(--border-radius);
      transition: transform 0.2s ease, background-color 0.2s ease;
      display: flex;
      flex-direction: column;
      height: 100%;
      align-items: center;
    }

    .badge:focus-visible {
        outline: 2px solid var(--button-bg);
        outline-offset: 2px;
    }

    @media (hover: hover) and (pointer: fine) {
        .badge:hover {
            transform: scale(1.05);
        }
    }
    
    .badge-icon {
        /* Changed from emoji text to image - removed border and background */
        transition: filter 0.3s ease;
        width: 56px;
        height: 56px;
        object-fit: contain;
        margin-bottom: var(--grid-unit);
    }

    .unearned .badge-icon {
        filter: grayscale(1);
        opacity: 0.6;
    }

    .badge-info {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        width: 100%;
    }

    .badge-info h4 {
        font-size: 0.7rem;
        margin: 0 0 calc(var(--grid-unit) / 4);
        font-weight: 700;
        color: var(--primary-text);
        line-height: 1.2;
    }

    .unearned .badge-info h4 {
        color: var(--primary-text);
    }
    
    .badge-date {
        font-size: 0.6rem;
        line-height: 1.2;
        margin: 0;
        font-weight: 500;
        color: var(--primary-text);
    }
    
    .badge-progress-container {
        display: flex;
        align-items: center;
        gap: calc(var(--grid-unit) * 0.75);
        margin-top: calc(var(--grid-unit) / 2);
        width: 66%;
        margin-left: auto;
        margin-right: auto;
    }

    .badge-progress-bar {
        -webkit-appearance: none;
        appearance: none;
        width: 100%;
        height: 6px;
        border: 1px solid var(--primary-text);
        border-radius: 100px;
        background-color: transparent;
        overflow: hidden;
    }
    .badge-progress-bar::-webkit-progress-bar {
        background-color: transparent;
    }
    .badge-progress-bar::-webkit-progress-value {
        background-color: var(--primary-text);
        border-radius: 100px;
    }
    .badge-progress-bar::-moz-progress-bar {
        background-color: var(--primary-text);
        border-radius: 100px;
    }
    .badge-progress-text {
        font-size: 0.6rem;
        font-weight: 700;
        color: var(--primary-text);
        margin: 0;
        white-space: nowrap;
    }
    
    /* --- Badge Detail Modal --- */
    .badge-detail-modal .badge-detail-icon {
        /* Changed from emoji text to image */
        width: 80px;
        height: 80px;
        object-fit: contain;
        margin-bottom: var(--grid-unit);
    }
     .badge-detail-modal h3 {
        font-size: 1.5rem;
        margin: calc(var(--grid-unit) / 2) 0;
        color: var(--header-text);
    }
    .badge-detail-modal p {
      font-size: 0.9rem;
      color: var(--primary-text);
      margin: 0 0 calc(var(--grid-unit) * 2);
    }


    /* --- Auth Modal: Theme Override --- */
    .auth-modal {
      background: #282828; /* Dark Charcoal */
      border-color: #eddec9;
      color: #EAEAEA; /* Off-white text */
    }
    .auth-modal h2 {
      font-size: 1.3rem;
      margin-bottom: calc(var(--grid-unit));
      color: #EAEAEA;
      letter-spacing: -0.8px;
    }
    .auth-modal .logo {
      font-size: 1rem;
      color: #EAEAEA;
      margin-bottom: calc(var(--grid-unit) * 2);
    }
    .auth-modal .auth-prompt {
      font-size: 0.9rem;
      line-height: 1.5;
      color: rgba(234, 234, 234, 0.7);
      margin: 0 auto calc(var(--grid-unit) * 2);
      max-width: 280px;
    }
    .auth-modal form {
      display: flex;
      flex-direction: column;
      gap: var(--grid-unit);
      margin-top: 0;
      text-align: left;
    }
    .auth-modal input {
      padding: calc(var(--grid-unit) * 1.5);
      border-radius: var(--grid-unit);
      border: 2px solid #EAEAEA; /* White outline */
      background-color: transparent;
      color: #EAEAEA;
      font-family: var(--font-ui);
      font-size: 16px;
      transition: border-color 0.2s ease;
    }
    .auth-modal input::placeholder {
      color: #EAEAEA; /* White placeholder */
      opacity: 0.6;
    }
    .auth-modal input:focus {
      outline: none;
      border-color: #eddec9; /* Use theme beige for focus */
    }
    .auth-modal .button, .auth-modal .google-button {
      width: 100%;
      padding: calc(var(--grid-unit) * 1.5) calc(var(--grid-unit) * 3);
      border-radius: 100px;
      font-family: var(--font-ui);
      font-weight: 700;
      font-size: 0.9rem;
      cursor: pointer;
      text-transform: uppercase;
      transition: transform 0.1s ease, background-color 0.2s ease, color 0.2s ease;
      white-space: nowrap;
    }
    /* CREATE ACCOUNT / LOGIN button */
    .auth-modal form .button {
       margin-top: calc(var(--grid-unit) / 2);
       color: #282828; /* Charcoal text */
    }
    .auth-modal form .button::after {
       background-color: #EAEAEA; /* White bg for face */
       border-radius: 8px !important;
    }
    .auth-modal form .button::before {
       background-color: rgba(234, 234, 234, 0.3); /* Light shadow */
    }
    .auth-modal .divider {
      display: flex;
      align-items: center;
      text-align: center;
      margin: calc(var(--grid-unit) * 2.5) 0;
      color: #EAEAEA; /* White text */
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
    }
    .auth-modal .divider::before,
    .auth-modal .divider::after {
      content: '';
      flex: 1;
      border-bottom: 1px solid #EAEAEA; /* White line */
    }
    .auth-modal .divider span {
      padding: 0 var(--grid-unit);
    }
    /* Google button */
    .auth-modal .google-button {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: var(--grid-unit);
        background-color: transparent; /* Transparent bg */
        color: #EAEAEA;
        border: 2px solid #EAEAEA; /* White outline */
        margin-top: 0;
    }
    .auth-modal .google-button svg {
        width: 18px;
        height: 18px;
    }
    .auth-modal .google-button-primary {
        background-color: #EAEAEA;
        color: #282828;
        border: none;
    }
    .auth-modal .google-button-primary:hover {
        background-color: #ffffff;
    }
    .auth-modal .auth-micro {
        font-size: 0.8rem;
        color: rgba(234, 234, 234, 0.6);
        margin-top: calc(var(--grid-unit) * -0.5);
        margin-bottom: calc(var(--grid-unit) * 2);
    }
    .auth-modal .email-toggle-link {
        background: none;
        border: none;
        color: #EAEAEA;
        font-family: var(--font-ui);
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        padding: 0;
        text-decoration: underline;
        text-underline-offset: 2px;
    }
    .auth-modal .email-toggle-link:hover {
        opacity: 0.7;
    }
    .auth-modal .toggle-auth {
        margin-top: calc(var(--grid-unit) * 2);
        font-size: 0.8rem;
        color: rgba(234, 234, 234, 0.7);
    }
    .auth-modal .toggle-auth button {
        background: none;
        border: none;
        color: #EAEAEA;
        font-weight: 700;
        cursor: pointer;
        padding: 0;
        text-decoration: underline;
    }
    .auth-modal .error-message {
        color: #e53273;
        font-size: 0.8rem;
        margin-top: calc(var(--grid-unit) / 2);
        text-align: center;
    }

    /* Logout Modal */
    .logout-modal h2 {
      font-size: 1.5rem;
      margin-bottom: calc(var(--grid-unit) / 2);
    }
    .logout-modal p {
      margin: calc(var(--grid-unit) / 2) 0 calc(var(--grid-unit) * 2.5);
      color: var(--primary-text);
      font-size: 0.9rem;
      line-height: 1.5;
    }
    .modal-button-group {
      display: flex;
      justify-content: center;
      gap: var(--grid-unit);
    }
    .modal-button-group .button {
      flex: 1;
      padding-left: calc(var(--grid-unit) * 1.5);
      padding-right: calc(var(--grid-unit) * 1.5);
    }

    /* --- Sign-Up Bottom Sheet --- */
    .signup-sheet-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0);
      z-index: 10000;
      transition: background 0.3s ease;
      pointer-events: none;
    }
    
    .signup-sheet-overlay.visible {
      background: rgba(0, 0, 0, 0.5);
      pointer-events: auto;
    }
    
    .signup-sheet {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--background-color);
      border-top-left-radius: calc(var(--border-radius) * 2);
      border-top-right-radius: calc(var(--border-radius) * 2);
      box-shadow: 0 -5px 30px rgba(0,0,0,0.2);
      padding: calc(var(--grid-unit) * 2) calc(var(--grid-unit) * 3) calc(var(--grid-unit) * 4);
      transform: translateY(100%);
      transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
      touch-action: none;
      user-select: none;
      max-width: 500px;
      margin: 0 auto;
    }
    
    .signup-sheet.visible {
      transform: translateY(0);
    }
    
    .signup-sheet .sheet-drag-handle {
      width: 40px;
      height: 4px;
      background-color: var(--bar-border);
      border-radius: 2px;
      position: absolute;
      top: 8px;
      left: 50%;
      transform: translateX(-50%);
      cursor: grab;
    }
    
    .signup-sheet-close {
      position: absolute;
      top: calc(var(--grid-unit) * 1.5);
      right: calc(var(--grid-unit) * 1.5);
      background: none;
      border: none;
      cursor: pointer;
      padding: calc(var(--grid-unit) / 2);
      color: var(--primary-text);
      opacity: 0.6;
      transition: opacity 0.2s ease;
    }
    
    .signup-sheet-close:hover {
      opacity: 1;
    }
    
    .signup-sheet-close svg {
      width: 20px;
      height: 20px;
    }
    
    .signup-sheet-header {
      text-align: center;
      margin-top: calc(var(--grid-unit) * 2);
      cursor: grab;
    }
    
    .signup-sheet-header h2 {
      font-family: var(--font-display);
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--header-text);
      margin: 0;
      letter-spacing: -1px;
    }
    
    .signup-sheet-content {
      text-align: center;
      margin: calc(var(--grid-unit) * 2) 0;
    }
    
    .signup-sheet-value-prop {
      font-family: var(--font-ui);
      font-size: 1rem;
      line-height: 1.5;
      color: var(--primary-text);
      margin: 0 0 calc(var(--grid-unit) * 2);
    }
    
    .signup-sheet-streak-warning {
      font-family: var(--font-ui);
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--header-text);
      margin: 0;
      padding: calc(var(--grid-unit) * 1.5);
      background: rgba(255, 140, 0, 0.1);
      border-radius: var(--border-radius);
    }
    
    .signup-sheet-actions {
      display: flex;
      flex-direction: column;
      gap: calc(var(--grid-unit) * 1.5);
      align-items: center;
      margin-top: calc(var(--grid-unit) * 2);
    }
    
    .signup-sheet-signup-button {
      width: 100%;
      max-width: 280px;
    }
    
    .signup-sheet-later-button {
      background: none;
      border: none;
      font-family: var(--font-ui);
      font-size: 0.9rem;
      color: var(--primary-text);
      opacity: 0.7;
      cursor: pointer;
      padding: calc(var(--grid-unit));
      transition: opacity 0.2s ease;
    }
    
    .signup-sheet-later-button:hover {
      opacity: 1;
    }

    /* TABLET STYLES */
    @media (min-width: 768px) {
      /* --- SCALING ROOTS --- */
      .app-wrapper, .modal-overlay, .daily-mode-wrapper {
        /* Set a font-size based on viewport height, with min/max caps */
        font-size: clamp(12px, 1.6vh, 20px);
      }

      body {
        padding: 0 calc(var(--grid-unit) * 5); /* 40px */
      }
      #root {
        max-width: 42em;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        min-height: 100dvh;
      }
       .app-wrapper {
        min-height: 0; /* Override mobile setting */
        padding-bottom: 0;
        flex: 1 1 auto;
        display: flex;
        flex-direction: column;
        justify-content: center;
        width: 100%;
      }
          /* justify-content is now handled by app-wrapper */
      
      .top-bar-container {
        width: 100vw;
        position: relative;
        left: 50%;
        transform: translateX(-50%);
        border-bottom: 1px solid var(--bar-border);
      }

      .top-bar {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        align-items: center;
        gap: 1em;
        padding-top: 1.5em;
        max-width: 42em;
        margin: 0 auto;
        padding-bottom: 1.5em;
        padding-left: 1em;
        padding-right: 1em;
      }
      
      .top-bar.start-screen-header {
          grid-template-columns: 1fr;
      }
      .top-bar.start-screen-header .logo {
          justify-self: center;
      }

      .top-bar .logo {
        font-size: 1.4em;
        justify-self: start;
      }

      .top-bar .logo-is-graphic svg {
        height: 1.4em;
        top: 0;
      }

      .top-bar .total-score,
      .top-bar .streak-score-text {
        font-size: 2em;
      }
      
      .top-bar .streak-icon {
        width: 2em;
        height: 2em;
        top: 0;
      }

      .top-bar .logo {
        justify-self: start;
      }
      .top-bar .score-display-group {
        justify-self: center;
        position: relative;
        top: -0.15em;
      }

      /* --- START SCREEN REWORK --- */
      .start-screen-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        flex-grow: 1;
      }
      .start-screen-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 3.5em; /* Space between lock-up and buttons */
        width: 100%;
        max-width: 30em;
      }
      .start-screen-container .header {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1.25em; /* Tighter gap inside lock-up */
        width: 100%;
        margin: 0;
        font-size: 1em; /* Reset */
      }
      .start-screen-container .mini-grid-wrapper {
        max-width: 6em;
        margin-bottom: 0;
        padding: 4px;
      }
      .start-screen-container .mini-grid {
        gap: 4px;
      }
      .start-screen-container .header svg {
        max-width: 14.4em;
      }
      .start-screen-container .tagline {
        font-size: 1.92em;
        font-weight: 400;
        line-height: 1.2;
        margin: 0;
        color: var(--tagline-text);
        text-transform: none; /* Override parent header style */
        text-align: center;   /* Override parent header style */
      }
      .welcome-back-message {
        display: none;
      }
      .start-screen-interaction {
        width: 100%;
        max-width: 18em;
      }
      .start-screen-buttons {
        margin-top: 0;
      }
      .start-screen-container .button {
        font-size: 1.5em;
        padding: 0.75em 2em;
      }

      /* --- Desktop Layout Overrides for Cohesion --- */
      .app-container {
        display: flex;
        flex-direction: column;
        flex-grow: 0; /* Prevent stretching */
        justify-content: center;
      }
      /* Remove flex-grow properties from .game-board-wrapper to keep the unit from stretching */
      .bottom-content-container {
        margin-top: 2.5em;
      }
      .state-solved .bottom-content-container {
        margin-top: 1.25em;
      }
      
      .game-header-info {
        margin-top: 2.5em;
        margin-bottom: 2.5em;
      }
      
      .tries-container > span {
        font-size: 1.4em;
      }

      .tries-dots-visual {
        gap: calc(var(--grid-unit) * 0.75);
      }
      
      .dot {
        width: calc(var(--grid-unit) * 2.5);
        height: calc(var(--grid-unit) * 2.5);
      }

      .solved-buttons {
        margin-top: 1em;
      }

      .feedback-text {
        font-size: 0.9em;
      }
      .word-card { font-size: 1.5em; }
      
      .game-unit {
        max-width: 31.25em;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        width: 100%;
        /* Remove flex properties to prevent stretching */
      }

      .solution-grid {
        gap: 1em;
        width: 100%;
        max-height: 100%;
        aspect-ratio: 1 / 1;
      }

      .solved-buttons .button {
        /* Make these buttons match the size of the submit button for visual consistency */
        flex-grow: 0;
        flex-shrink: 0;
        flex-basis: 33.333%;
        padding: 0.75em 0.75em;
        font-size: 1.1em;
      }

      .button-group .button {
        font-size: 1.1em;
        padding: 0.75em 1.5em;
      }

      .solved-feedback-text {
        font-size: 1.6em;
      }

      /* --- Scalable Modals --- */
      .modal-content:not(.auth-modal) {
        max-width: 40em;
        font-size: 1.1em; /* Bump up base font size for modal content */
      }
      .modal-content {
        padding: 1.5em;
      }
      .auth-modal {
        max-width: 25em; /* Keep auth modal compact */
      }
      
      .achievement-sheet {
        max-width: 56em;
        margin: 0 auto;
      }

      /* START: Added styles for modal content scaling */
      .modal-content.achievement-showcase-modal h2, .achievement-sheet h2 {
        font-size: 1.8em;
      }
      .explanation-modal .logic-narrative {
        font-size: 1.1em;
        line-height: 1.7;
      }
      .badge-unlock-modal h3 {
        font-size: 2em;
      }
      .badge-unlock-modal p {
        font-size: 1em;
      }
      .badge-unlocked-icon {
        /* Changed from emoji text to image */
        width: 120px;
        height: 120px;
      }
      .badge-unlock-modal .button {
        font-size: 1.2em;
        padding: 0.75em 1.5em;
      }
      .achievement-sheet .badge-grid {
        grid-template-columns: repeat(auto-fill, minmax(136px, 1fr));
        gap: calc(var(--grid-unit) * 5);
      }
       .achievement-sheet .badge-date,
       .achievement-sheet .badge-progress-text {
        font-size: 0.75rem;
      }
      .achievement-sheet .badge-icon {
        /* Changed from emoji text to image */
        width: 80px;
        height: 80px;
      }
      .achievement-sheet .badge-info h4 {
        font-size: 0.9rem;
        margin: var(--grid-unit) 0 0;
      }
      /* END: Added styles for modal content scaling */

      .auth-modal input {
        padding: 0.75em;
        border-radius: 0.5em;
        font-size: 1em;
      }
      .auth-modal .google-button svg {
        width: 1.125em;
        height: 1.125em;
      }
      .auth-modal .auth-prompt {
        max-width: none;
      }
    }
    
    /* DESKTOP-ONLY STYLES */
    @media (min-width: 1024px) {
      .header {
        margin-top: 2em;
      }
      .top-bar {
        max-width: none;
        padding-left: 2.5em;
        padding-right: 2.5em;
      }

      .top-bar .logo {
        font-size: 1.6em;
      }

      .top-bar .total-score,
      .top-bar .streak-score-text {
        font-size: 2em;
      }

      .top-bar .streak-icon {
        width: 2em;
        height: 2em;
        top: 0;
      }

      .bottom-bar {
        display: none;
      }

      .top-bar .utility-group {
        display: flex;
        justify-self: end;
        align-items: center;
        gap: 2em;
      }
      
      .utility-group .theme-toggle {
        width: 2em;
        height: 2em;
        color: var(--header-text);
        cursor: pointer;
        transition: transform 0.2s ease, color 0.3s ease;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }
      .utility-group .achievement-icon {
        cursor: pointer;
      }
      .utility-group .achievement-icon svg {
        width: 3.6em;
        height: 3.6em;
      }
      .utility-group .theme-toggle:hover {
        transform: scale(1.1);
      }
      .utility-group .auth-button {
        font-size: 1em;
        text-transform: none;
      }
      .utility-group .user-display {
        font-size: 1em;
      }
      .utility-group .user-display .avatar-button {
        font-size: 1em;
      }
      .utility-group .avatar-button svg {
        width: 3.6em;
        height: 3.6em;
      }
    }

    /* --- Loss Flash Animation --- */
    .loss-flash-active {
      animation: loss-bg-flash 0.4s ease-in-out;
    }

    @keyframes loss-bg-flash {
      0% { background-color: var(--background-color); }
      50% { background-color: #ff5757; } /* A dramatic red */
      100% { background-color: var(--background-color); }
    }

    /* All Done Screen */
    .all-done-screen {
      display: flex;
      flex-direction: column;
      width: 100%;
    }

    .all-done-content {
      max-width: calc(var(--grid-unit) * 63); /* 504px - matches #root max-width */
      margin: 0 auto;
      padding: calc(var(--grid-unit) * 2) calc(var(--grid-unit) * 3); /* 16px top/bottom, 24px left/right */
      width: 100%;
    }

    @media (max-width: 767px) {
      .all-done-content {
        padding: calc(var(--grid-unit) * 2); /* 16px all around */
        overflow-x: visible; /* Prevent clipping */
      }
    }

    @media (min-width: 768px) {
      .all-done-content {
        max-width: calc(var(--grid-unit) * 100); /* 800px */
        padding: calc(var(--grid-unit) * 3) calc(var(--grid-unit) * 4); /* 24px top/bottom, 32px left/right */
      }
    }

    @media (min-width: 1024px) {
      .all-done-content {
        max-width: calc(var(--grid-unit) * 120); /* 960px */
        padding: calc(var(--grid-unit) * 4.5) calc(var(--grid-unit) * 4); /* 36px top/bottom, 32px left/right */
      }
    }

    .day-carousel-section {
      width: 100vw;
      margin-left: calc(50% - 50vw); /* Break out of parent container */
      margin-right: calc(50% - 50vw);
      margin-top: 0; /* Removed negative margin */
      padding: 0;
      overflow-x: visible;
      overflow-y: visible; /* Allow vertical overflow so share button isn't clipped */
    }

    .day-carousel-scroll {
      display: flex;
      gap: calc(var(--grid-unit) * 1); /* 8px on mobile */
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      padding: 0 calc(var(--grid-unit) * 3); /* 24px on mobile */
      scrollbar-width: none; /* Firefox - hide scrollbar */
      -ms-overflow-style: none; /* IE and Edge - hide scrollbar */
    }

    .day-carousel-scroll::-webkit-scrollbar {
      display: none; /* Chrome, Safari, Opera - hide scrollbar */
    }

    .day-carousel-card-wrapper {
      flex: 0 0 min(calc(var(--grid-unit) * 41.75), 90vw); /* 334px or 90vw on mobile */
      scroll-snap-align: center;
      scroll-snap-stop: always;
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    /* Mobile: Active card styling */
    .day-carousel-card-wrapper.active {
      transform: scale(1);
      opacity: 1;
    }

    .day-carousel-card-wrapper.inactive {
      transform: scale(0.94);
      opacity: 0.7;
    }

    @media (max-width: 767px) {
      .day-carousel-card-wrapper {
        flex: 0 0 clamp(252px, 76.5vw, 324px); /* Responsive width: 90% of original (280px252px, 85vw76.5vw, 360px324px) */
      }
    }

    @media (min-width: 768px) {
      .day-carousel-scroll {
        gap: 0.5em; /* Fluid gap for tablet/desktop */
        padding: 0 1.5em; /* Fluid padding for tablet/desktop */
        scroll-snap-type: none; /* Free scrolling on tablet/desktop */
      }

      .day-carousel-card-wrapper {
        flex: 0 0 min(20.875em, 90vw); /* Fluid width for tablet/desktop */
        scroll-snap-align: none; /* Remove snap alignment */
        scroll-snap-stop: normal; /* Remove snap stop */
      }

      /* Tablet/Desktop: All cards same size, no scaling or opacity differences */
      .day-carousel-card-wrapper.active,
      .day-carousel-card-wrapper.inactive {
        transform: scale(1);
        opacity: 1;
      }

      .day-carousel-section {
        margin-top: 2em; /* Add spacing above carousel on desktop */
      }
    }

    /* All Done Screen Quote */
    .all-done-quote {
      font-family: var(--font-ui);
      font-size: clamp(1.75rem, 4vw, 2.5rem); /* Fluid scaling from 28px to 40px */
      font-weight: 700;
      text-align: center;
      color: var(--primary-text);
      margin: calc(var(--grid-unit) * 8 - 24px) 0 calc(var(--grid-unit) * 4) 0; /* Moved up 24px on mobile */
      line-height: 1.2;
      white-space: nowrap;
    }
    /* Hide quote in bonus speed round mode */
    .bonus-speed-round-mode .all-done-quote {
      display: none;
    }
    @media (max-width: 767px) {
      .all-done-quote {
        display: block;
        margin-left: auto;
        margin-right: auto;
        text-align: center;
        margin-top: calc(var(--grid-unit) * 2); /* Reduced to 16px - minimal space from top bar */
        margin-bottom: calc(var(--grid-unit) * 3); /* Increased to 24px - more space before stats line */
      }
    }
    @media (min-width: 768px) {
      .all-done-quote {
        font-size: 3rem;
        margin-top: 2em;
        margin-bottom: 0.75em;
        margin-left: auto;
        margin-right: auto;
        display: block;
        text-align: center;
      }
    }

    /* All Done Screen Stats Row */
    .all-done-stats-row {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: clamp(16px, 4vw, 40px); /* Fluid gap: scales from 16px on smallest screens to 40px on larger */
      margin: 0; /* Removed margins for symmetry */
      width: 100%;
      justify-items: center;
    }
    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: calc(var(--grid-unit) * 0.25); /* Reduced gap between number and label */
      text-align: center;
    }
    .stat-value {
      font-family: var(--font-ui);
      font-size: clamp(1.5rem, 4vw, 2.5rem); /* Fluid scaling from 24px to 40px - reduced from 30px-48px */
      font-weight: 500;
      color: var(--primary-text);
      line-height: 1;
    }
    .stat-label {
      font-family: var(--font-ui);
      font-size: clamp(0.875rem, 2.2vw, 1rem); /* Fluid scaling from 14px to 16px */
      color: var(--primary-text);
      text-transform: none;
      font-weight: 400;
      white-space: nowrap;
    }
    @media (max-width: 767px) {
      .all-done-stats-row {
        /* Keep repeat(4, 1fr) - respects container boundaries like puzzle grid */
        gap: clamp(12px, 3vw, 32px); /* Fluid gap: scales from 12px on iPhone SE to 32px on larger phones */
      }
    }
    
    /* Taller phones (iPhone 13 Max, iPhone 15 Max, etc.) - add breathing room */
    @media (max-width: 767px) and (min-height: 700px) {
      .all-done-content {
        padding-top: calc(var(--grid-unit) * 4); /* 32px top padding */
        padding-bottom: calc(var(--grid-unit) * 4); /* 32px bottom padding */
      }
      .all-done-stats-row {
        margin-bottom: calc(var(--grid-unit) * 2); /* 16px bottom margin */
      }
      .day-carousel-section {
        margin-top: calc(var(--grid-unit) * 2); /* 16px top margin */
      }
    }
    
    @media (min-width: 768px) {
      .stat-value {
        font-size: 2.5em;
        font-weight: 500;
      }
      .stat-label {
        font-size: 0.9em;
      }
      .all-done-stats-row {
        gap: 3em;
        margin: 0 auto; /* Center horizontally, no bottom margin */
        grid-template-columns: repeat(4, auto);
        width: fit-content;
        max-width: 100%;
      }
    }

    /* Play Missed Puzzles Button */
    .play-missed-button {
      background-color: #F5F5F5; /* Light gray/off-white */
      color: #2E2E2E; /* Dark gray/black text */
      border: 2px solid #2E2E2E; /* Thin dark border */
      border-radius: 100px; /* Pill shape */
      padding: clamp(1.25em, 3vw, 1.5em) clamp(3em, 7vw, 4em); /* Fluid padding scaling */
      font-family: var(--font-ui);
      font-size: clamp(1rem, 2.5vw, 1.25rem); /* Fluid scaling from 16px to 20px */
      font-weight: 700;
      text-transform: uppercase;
      text-align: center;
      cursor: pointer;
      display: block;
      width: 100%;
      max-width: 100%;
      margin: calc(var(--grid-unit) * 2 + 4px) auto 0; /* Moved down 4px on mobile (was 4px up, now 8px down from that) */
      transition: opacity 0.2s ease, background-color 0.2s ease;
    }

    .play-missed-button:hover {
      opacity: 0.9;
      background-color: #E9E9E9;
    }

    .play-missed-button:active {
      opacity: 0.8;
    }

    @media (min-width: 768px) {
      .play-missed-button {
        padding: 0.75em 2em;
        font-size: 1em;
        max-width: none;
        width: auto;
        margin-top: calc(var(--grid-unit) * 2); /* Reset mobile negative margin */
      }
    }

    /* MOBILE AND TABLET STYLES */
    @media (max-width: 1023px) {
      .app-container:not(.state-start) {
        justify-content: center;
      }
      
      /* Start Screen vertical alignment */
      .start-screen-container {
        padding-top: 10vh;
        justify-content: flex-start;
      }
      .start-screen-interaction {
        margin-top: 0;
      }
      .welcome-back-message {
        margin-top: calc(var(--grid-unit) * 4);
      }
      
      .state-solved .game-header-info {
        margin-top: 0;
      }

      .tagline,
      .start-screen-container .tagline {
        margin-top: calc(var(--grid-unit) * 2);
      }

      .tries-container > span {
        font-size: 1.2rem;
      }

      /* Mobile: Set face corner radius to 8px for SHOW LINKLE, NEXT PUZZLE, and SHOW STATS buttons */
      .button-outline::after {
        border-radius: 8px !important; /* Face radius - 8px on mobile */
      }
      body[data-theme='dark'] .button-outline::after {
        border-radius: 8px !important; /* Face radius - 8px on mobile dark mode */
      }
      .button-bonus::after {
        border-radius: 8px !important; /* Face radius - 8px on mobile */
      }
      .button-secondary::after {
        border-radius: 8px !important; /* Face radius - 8px on mobile */
      }
      body[data-theme='dark'] .button-secondary::after {
        border-radius: 8px !important; /* Face radius - 8px on mobile dark mode */
      }

      /* Mobile: Set word tile shadow offset to 7px */
      .word-card::before {
        top: 7px; /* Shadow offset - 7px on mobile (down from 10px) */
      }

      /* Mobile: Set SUBMIT button face corner radius to 12px */
      .button.button-submit::after {
        border-radius: 12px !important; /* Face radius - 12px on mobile */
      }

      .bottom-content-container {
        padding-top: calc(var(--grid-unit) * 3.5);
      }
      .state-solved .bottom-content-container {
        padding-top: calc(var(--grid-unit) * 1.5);
      }
      
      .bottom-bar-content {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        padding-left: calc(var(--grid-unit) * 5);
        padding-right: calc(var(--grid-unit) * 5);
      }
      .bottom-bar-content .theme-toggle {
  justify-self: center;
}
      .bottom-bar-content .achievement-icon {
        justify-self: center;
      }
      .bottom-bar-content .achievement-icon svg {
        width: 3rem;
        height: 3rem;
      }
      .bottom-bar-content .avatar-button svg {
        width: 3.2rem;
        height: 3.2rem;
      }
      .bottom-bar-content .user-display {
        grid-column: 3;
        justify-self: center;
      }

      .dev-reset-button {
        position: fixed;
        top: 10px;
        right: 10px;
        background-color: #ff5757;
        color: white;
        border: none;
        border-radius: 4px;
        padding: 8px 12px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        z-index: 10000;
        font-family: var(--font-ui);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        transition: opacity 0.2s ease;
      }
      .dev-reset-button:hover {
        opacity: 0.9;
      }
      .dev-reset-button:active {
        opacity: 0.8;
      }

      .solved-feedback-container {
        padding-top: 0;
      }
    }

    /* Day Card Styling */
    .day-card {
      background-color: #111111;
      border-radius: calc(var(--grid-unit) * 1); /* 8px */
      width: 100%;
      height: calc(var(--grid-unit) * 56); /* Fixed height: 448px (56  8px) - ensures all cards same size */
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      overflow: hidden; /* Prevent content overflow */
    }

    @media (max-width: 767px) {
      .day-card {
        height: auto !important; /* Allow card to grow to fit all content including share button */
        min-height: min(calc(var(--grid-unit) * 45), calc((100vh - 250px) * 0.85)); /* Reduced height: 360px min, 85% of viewport */
        max-height: none !important; /* Remove max-height constraint - let content determine height */
        overflow: visible !important; /* Allow content to be visible, especially share button */
      }
      .day-carousel-scroll {
        padding-bottom: calc(var(--grid-unit) * 4); /* Add bottom padding to ensure share button isn't clipped by viewport */
      }
      .day-card-summary {
        padding: clamp(7.2px, 1.8vw, 10.8px) clamp(8px, 2vw, 12px) clamp(10.08px, 2.52vw, 15.12px) clamp(8px, 2vw, 12px); /* Bottom padding: 10.08-15.12px fluid scaling (70% of 14.4-21.6px) */
        gap: clamp(5.4px, 1.35vw, 9px); /* 90% of original gap: scales from 5.4px to 9px */
      }
      .bonus-day-card {
        padding: clamp(7.2px, 1.8vw, 10.8px) clamp(8px, 2vw, 12px) clamp(10.08px, 2.52vw, 15.12px) clamp(8px, 2vw, 12px); /* Match .day-card-summary mobile padding */
        gap: clamp(5.4px, 1.35vw, 9px); /* Match .day-card-summary mobile gap */
      }
      .day-card-section {
        padding: clamp(5.4px, 1.35vw, 9px); /* 90% of original padding: scales from 5.4px to 9px */
        gap: clamp(3.6px, 0.9vw, 5.4px); /* 90% of original gap: scales from 3.6px to 5.4px */
      }
      .day-card-share-container {
        margin-top: 4px; /* 4px space above button */
        margin-bottom: 4px; /* space below button */
      }
      .day-card-share-button {
        padding: clamp(0.6em, 1.8vw, 0.9em) clamp(2em, 5vw, 2.5em) clamp(0.4em, 1.2vw, 0.6em) clamp(2em, 5vw, 2.5em); /* Asymmetric padding: more top, less bottom */
      }
      
      /* Mobile: Reduce start screen tagline font size to prevent awkward line breaks */
      .start-screen-container .tagline {
        font-size: 1.4rem;
        max-width: 85vw;
        line-height: 1.3;
      }
    }

    body[data-theme='dark'] .day-card-summary {
      background-color: #3b422e;
    }

    .day-card-summary {
      padding: calc(var(--grid-unit) * 1.5) calc(var(--grid-unit) * 3) calc(var(--grid-unit) * 1.4) calc(var(--grid-unit) * 3); /* 12px top, 24px sides, 11.2px bottom (70% of 16px) */
      gap: calc(var(--grid-unit) * 1.25); /* 10px - slightly reduced */
    }

    .day-card-header-summary {
      font-family: var(--font-ui);
      font-size: 1rem;
      font-weight: 700;
      color: #FFFFFF;
      text-align: center;
      margin-bottom: calc(var(--grid-unit) * 0.25); /* 2px - 50% reduction from 4px */
    }

    .day-card-section {
      background-color: #C8B8EF; /* Slightly darker purple for solved sections */
      border-radius: calc(var(--grid-unit) * 1); /* 8px - matches daycard corner radius */
      padding: calc(var(--grid-unit) * 1.25); /* 10px - slightly reduced */
      display: flex;
      flex-direction: column;
      gap: calc(var(--grid-unit) * 0.625); /* 5px - slightly reduced */
    }

    body[data-theme='dark'] .day-card-section:not(.day-card-section-failed) {
      background-color: #3b422e;
    }

    .day-card-section-failed {
      background-color: #ff5757; /* Red for failed sections */
    }

    .day-card-section-header {
      display: flex;
      gap: calc(var(--grid-unit) * 3); /* 24px */
      align-items: center;
    }

    .day-card-small-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: calc(var(--grid-unit) * 0.25); /* 2px - reduced from 4px */
      flex-shrink: 0;
      width: calc(var(--grid-unit) * 9.7); /* 77.6px - another 10% increase from 70.4px */
      height: calc(var(--grid-unit) * 9.7); /* 77.6px - another 10% increase from 70.4px */
    }

    .day-card-solved-grid-svg {
      width: calc(var(--grid-unit) * 9.7); /* Match grid size */
      height: calc(var(--grid-unit) * 9.7); /* Match grid size */
      flex-shrink: 0;
      display: block;
    }


    .day-card-square-correct {
      background-color: #00bf63; /* Vibrant green matching SVG */
    }

    .day-card-square-incorrect {
      background-color: #FFFFFF; /* White for incorrect positions */
    }

    .day-card-section-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: calc(var(--grid-unit) * 0.25); /* 2px - 50% reduction from 4px */
    }

    .day-card-section-title {
      font-family: var(--font-ui);
      font-size: 0.875rem;
      font-weight: 700;
      color: #FFFFFF;
    }

    .day-card-section:not(.day-card-section-failed) .day-card-section-title {
      color: #2E2E2E; /* Black text for solved puzzles */
    }

    body[data-theme='dark'] .day-card-section:not(.day-card-section-failed) .day-card-section-title {
      color: #f6e6d9;
    }

    .day-card-section-words {
      font-family: var(--font-ui);
      font-size: 0.75rem;
      color: #FFFFFF;
      line-height: 1.3;
    }
    .day-card-word-group {
      display: block;
      white-space: nowrap; /* Prevent words from wrapping within each group of 3 */
    }

    .day-card-section:not(.day-card-section-failed) .day-card-section-words {
      color: #2E2E2E; /* Black text for solved puzzles */
    }

    body[data-theme='dark'] .day-card-section:not(.day-card-section-failed) .day-card-section-words {
      color: #f6e6d9;
    }

    .day-card-share-container {
      margin-top: 4px; /* 4px space above button */
      display: flex;
      justify-content: center;
    }

    .day-card-share-button {
      background-color: transparent;
      color: #FFFFFF; /* White text */
      border: none;
      border-radius: 0; /* No radius on parent - let ::after control it */
      padding: clamp(0.85em, 2.2vw, 1.15em) clamp(2em, 5vw, 2.5em) clamp(0.65em, 1.8vw, 0.85em) clamp(2em, 5vw, 2.5em); /* Asymmetric padding: more top, less bottom */
      font-family: var(--font-ui);
      font-size: clamp(1rem, 2.5vw, 1.25rem); /* Fluid scaling from 16px to 20px */
      font-weight: 700;
      text-transform: uppercase;
      text-align: center;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: calc(var(--grid-unit) * 1.5);
      transition: transform 0.1s ease;
      line-height: 1.2; /* Slightly increased for better vertical centering */
      box-shadow: none;
      margin-bottom: var(--shadow-depth);
      position: relative;
      overflow: visible;
      z-index: 1;
    }

    /* Face */
    .day-card-share-button::after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100%;
      height: 100%;
      background-color: #4CAF50; /* Vibrant green button */
      border-radius: 8px !important; /* Face radius - 8px */
      transform: translateZ(0); /* Force hardware acceleration */
      z-index: -1;
    }

    /* Shadow */
    .day-card-share-button::before {
      content: '';
      position: absolute;
      top: var(--shadow-depth);
      left: 0;
      width: 100%;
      height: 100%;
      background-color: var(--tile-shadow-locked);
      border-radius: 100px;
      z-index: -2;
      transition: transform 0.1s ease;
    }

    .day-card-share-button span {
      display: inline-block;
      text-align: center;
      line-height: 1.2; /* Match button line-height */
      position: relative; z-index: 1;
    }

    .day-card-share-button svg {
      stroke: #FFFFFF; /* White icon */
      flex-shrink: 0;
      width: clamp(16px, 4vw, 20px); /* Fluid scaling from 16px to 20px */
      height: clamp(16px, 4vw, 20px); /* Fluid scaling from 16px to 20px */
      vertical-align: middle;
      position: relative; z-index: 1;
    }

    .day-card-share-button:hover {
      transform: translateY(-2px);
    }
    .day-card-share-button:hover::before {
      transform: translateY(2px);
    }

    .day-card-share-button:active {
      transform: translateY(var(--shadow-depth));
    }
    .day-card-share-button:active::before {
      transform: translateY(calc(var(--shadow-depth) * -1));
    }

    /* Playable card styling */
    .day-card-playable {
      padding: calc(var(--grid-unit) * 1.5) calc(var(--grid-unit) * 3) calc(var(--grid-unit) * 5.7624) calc(var(--grid-unit) * 3); /* Bottom padding: 46.0992px (98% of 47.04px) */
      background-color: #C8B8EF; /* Slightly darker purple matching solved sections */
      border: 2px solid #2E2E2E; /* Black stroke outline */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center; /* Center content vertically */
      gap: 0; /* Remove gap - use margins for precise control */
      min-height: fit-content;
    }

    body[data-theme='dark'] .day-card-playable {
      background-color: #3b422e;
      border: none;
      box-shadow: inset 0 0 0 2px #f6e6d9;
    }

    .day-card-header-playable {
      font-family: var(--font-ui);
      font-size: 1rem;
      font-weight: 700;
      color: #2E2E2E; /* Dark gray to match image */
      text-align: center;
      margin-bottom: calc(var(--grid-unit) * 8); /* 64px space between date and logomark */
    }

    body[data-theme='dark'] .day-card-header-playable {
      color: #f6e6d9;
    }

    .day-card-large-grid-container {
      display: flex;
      justify-content: center;
      align-items: center;
      flex: 0 1 auto; /* Don't expand - let content determine size */
      margin: 0 0 calc(var(--grid-unit) * 3) 0; /* 24px space below logomark before button */
    }

    .day-card-logomark-img {
      width: calc(var(--grid-unit) * 24); /* 192px - matches original grid size */
      height: auto;
      display: block;
    }


    .day-card-play-button {
      background-color: transparent;
      color: var(--button-text); /* White text */
      border: none;
      border-radius: 0; /* No radius on parent - let ::after control it */
      padding: calc(var(--grid-unit) * 2.5) calc(var(--grid-unit) * 8); /* Horizontal oval shape */
      font-family: var(--font-display); /* Antonio - matches app's play buttons */
      font-size: 1.75rem; /* Increased font size */
      font-weight: 700;
      text-transform: uppercase;
      cursor: pointer;
      transition: transform 0.1s ease;
      width: auto;
      min-width: calc(var(--grid-unit) * 20); /* Ensure it's wide enough */
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
      padding-top: calc(var(--grid-unit) * 2.5 - 2px); /* Slightly reduce top padding to move text up */
      padding-bottom: calc(var(--grid-unit) * 2.5 + 2px); /* Compensate with bottom padding */
      margin-top: 0; /* No margin - spacing handled by grid container */
      box-shadow: none;
      margin-bottom: var(--shadow-depth);
      position: relative;
      overflow: visible;
      z-index: 1;
    }

    /* Face */
    .day-card-play-button::after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100%;
      height: 100%;
      background-color: var(--button-bg);
      border-radius: 12px !important; /* Face radius - 12px */
      transform: translateZ(0); /* Force hardware acceleration */
      z-index: -1;
    }

    /* Shadow */
    .day-card-play-button::before {
      content: '';
      position: absolute;
      top: var(--shadow-depth);
      left: 0;
      width: 100%;
      height: 100%;
      background-color: var(--button-shadow);
      border-radius: 100px;
      z-index: -2;
      transition: transform 0.1s ease;
    }

    .day-card-play-button:hover {
      transform: translateY(-2px);
    }
    .day-card-play-button:hover::before {
      transform: translateY(2px);
    }

    .day-card-play-button:active {
      transform: translateY(var(--shadow-depth));
    }
    .day-card-play-button:active::before {
      transform: translateY(calc(var(--shadow-depth) * -1));
    }

    /* Partial completion card styles */
    .day-card-partial {
      padding: calc(var(--grid-unit) * 1.5) calc(var(--grid-unit) * 3) calc(var(--grid-unit) * 5.7624) calc(var(--grid-unit) * 3);
      background-color: #C8B8EF;
      border: 2px solid #2E2E2E;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 0;
      min-height: fit-content;
      position: relative;
    }

    body[data-theme='dark'] .day-card-partial {
      background-color: #3b422e;
      border: none;
      box-shadow: inset 0 0 0 2px #f6e6d9;
    }

    /* Badge for partial completion */
    .day-card-badge {
      position: absolute;
      top: calc(var(--grid-unit) * 1.5);
      right: calc(var(--grid-unit) * 1.5);
      background-color: #3b422e;
      color: #f6e6d9;
      font-family: var(--font-ui);
      font-size: 0.75rem;
      font-weight: 600;
      padding: 0.25em 0.6em;
      border-radius: 100px;
      white-space: nowrap;
    }

    body[data-theme='dark'] .day-card-badge {
      background-color: #f6e6d9;
      color: #3b422e;
    }

    /* Progress dots for partial completion */
    .day-card-progress-dots {
      display: flex;
      gap: 0.5em;
      justify-content: center;
      margin-bottom: calc(var(--grid-unit) * 2);
    }

    .progress-dot {
      width: 0.75em;
      height: 0.75em;
      border-radius: 50%;
      background-color: rgba(62, 66, 46, 0.3);
      border: 2px solid #3b422e;
    }

    .progress-dot.filled {
      background-color: #9eef80;
      border-color: #3b422e;
    }

    body[data-theme='dark'] .progress-dot {
      background-color: rgba(246, 230, 217, 0.2);
      border-color: #f6e6d9;
    }

    body[data-theme='dark'] .progress-dot.filled {
      background-color: #9eef80;
      border-color: #f6e6d9;
    }

    @media (min-width: 768px) {
      .day-card {
        height: 29em; /* Taller height for tablet/desktop (reduced by 48px total) */
        border-radius: 0.5em; /* Match mobile proportions (8px/16px=0.5) */
      }

      .day-card-summary {
        padding: 0.75em 1.5em 1.75em 1.5em; /* Match mobile proportions (12px/16px=0.75, 24px/16px=1.5, 28px/16px=1.75) */
        gap: 0.75em; /* Increased by ~2px */
        display: flex;
        flex-direction: column;
      }

      .bonus-day-card {
        padding: 0.75em 1.5em 1.5em 1.5em; /* Match .day-card-summary tablet/desktop padding */
        gap: 0.625em; /* Match .day-card-summary tablet/desktop gap */
        height: 100%; /* Fill card height */
        max-height: 100%; /* Never exceed parent card height */
        box-sizing: border-box;
        overflow: hidden; /* Clip any overflow */
      }

      .day-card-header-summary {
        font-size: 1em; /* Match mobile (1rem = 16px) */
        margin-bottom: 0.125em; /* Match mobile proportions (2px/16px=0.125) */
      }

      .day-card-section {
        padding: 0.625em; /* Match mobile proportions (10px/16px=0.625) */
        gap: 0.3125em; /* Match mobile proportions (5px/16px=0.3125) */
        border-radius: 0.5em; /* Match mobile proportions (8px/16px=0.5) */
      }

      .day-card-small-grid {
        width: 4.85em; /* Match mobile proportions (77.6px/16px=4.85) */
        height: 4.85em; /* Match mobile proportions (77.6px/16px=4.85) */
        gap: 0.125em; /* Match mobile proportions (2px/16px=0.125) */
      }

      .day-card-solved-grid-svg {
        width: 4.85em; /* Match mobile proportions (77.6px/16px=4.85) */
        height: 4.85em; /* Match mobile proportions (77.6px/16px=4.85) */
      }

      .day-card-small-square {
        border-radius: 0.25em; /* Match mobile proportions (4px/16px=0.25) */
      }

      .day-card-section-header {
        gap: 1.5em; /* 24px equivalent */
      }

      .day-card-section-title {
        font-size: 0.875em;
      }

      .day-card-section-words {
        font-size: 0.75em;
      }

      .day-card-share-container {
        margin-top: auto; /* Push to bottom of card */
        padding-top: 0.75em; /* Minimum space above button */
      }

      .day-card-share-button {
        padding: 0.85em 2em 0.65em 2em; /* Asymmetric padding: more top (13.6px), less bottom (10.4px) */
        font-size: 1em; /* Match mobile (1rem = 16px) */
        gap: 0.75em; /* Match mobile proportions (12px/16px=0.75) */
      }

      .day-card-share-button svg {
        width: 1em; /* Match mobile proportions (16px/16px=1) */
        height: 1em; /* Match mobile proportions (16px/16px=1) */
      }

      .day-card-playable,
      .day-card-partial {
        padding: 0.75em 1.5em 0.75em 1.5em; /* Equal top/bottom padding */
        gap: 0;
        justify-content: center; /* Center all content vertically as a group */
        align-items: center;
        position: relative; /* For absolute positioning of header */
      }

      .day-card-header-playable {
        font-size: 1em;
        margin-bottom: 0;
        position: absolute; /* Take header out of flow so it doesn't affect centering */
        top: 0.75em; /* Position at top with same padding as card */
        left: 0;
        right: 0;
        text-align: center;
      }

      .day-card-badge {
        top: 0.75em;
        right: 0.75em;
      }

      .day-card-progress-dots {
        margin-bottom: 0.75em;
      }

      .day-card-large-grid-container {
        flex: 0 0 auto;
        margin-top: 0;
        margin-bottom: 0.75em; /* Tight space between grid and button */
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .day-card-logomark-img {
        width: 12em;
      }

      .day-card-play-button {
        padding: 0.625em 2em;
        padding-top: calc(0.625em - 0.125em);
        padding-bottom: calc(0.625em + 0.125em);
        font-size: 1.75em;
        min-width: 5em;
        display: flex;
        align-items: center;
        justify-content: center;
        line-height: 1;
        margin-top: 0;
        margin-bottom: 0;
        align-self: center;
      }
    }

    /* Daily Intro Screen */
    .daily-intro-screen {
      width: calc(100% + calc(var(--grid-unit) * 10)); /* Account for body padding on both sides */
      min-height: 100vh; /* Fallback for older browsers */
      min-height: 100dvh; /* Modern browsers - accounts for mobile browser UI */
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: var(--background-color);
      padding: clamp(1rem, 3vw, 2.5rem);
      font-size: clamp(10px, 1.5vw, 18px); /* Fluid base font - scales entire design */
      margin-left: calc(-1 * calc(var(--grid-unit) * 5)); /* Break out of body padding */
      margin-right: calc(-1 * calc(var(--grid-unit) * 5)); /* Break out of body padding */
      box-sizing: border-box;
      overflow: hidden; /* Prevent overflow */
    }

    .daily-intro-content {
      width: 100%;
      max-width: min(95%, clamp(320px, 90vw, 700px)); /* Fluid max-width that scales */
      margin: 0 auto;
      text-align: left;
      padding: 0 clamp(8px, 2vw, 16px); /* Breathing room */
      box-sizing: border-box;
    }

    .daily-intro-stack {
      width: fit-content; /* Shrink to content size so we can center it */
      display: flex;
      flex-direction: column;
      align-items: flex-start; /* Left-align date with logomark internally */
      gap: 2.5em; /* Scales proportionally with base font size */
      margin: 0 auto; /* Center the entire stack horizontally */
      padding-bottom: 5em; /* Push content up to compensate for missing button */
    }

    .daily-intro-date {
      font-family: var(--font-ui);
      font-size: 1.6em; /* Scales proportionally with base font size */
      font-weight: 700;
      color: var(--primary-text);
      text-align: left; /* Left-align with logomark below */
      max-width: 100%; /* Allow wrapping if needed */
    }

    .daily-intro-message-container {
      display: flex;
      align-items: center; /* Vertically center text relative to logo grid */
      justify-content: flex-start; /* Left-align logomark with date above */
      gap: 1.75em; /* Scales proportionally with base font size */
    }

    .daily-intro-logomark {
      width: 6.5em; /* Scales proportionally with base font size */
      height: auto;
      flex-shrink: 0;
    }

    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .fade-out {
      animation: fadeOut 0.3s ease-out forwards;
    }

    .fade-in {
      animation: fadeIn 0.5s ease-out forwards;
    }

    .daily-intro-copy {
      font-family: var(--font-ui);
      font-weight: 400;
      font-size: 1.6em; /* Scales proportionally with base font size, matching logomark */
      line-height: 1.3;
      color: var(--primary-text);
      white-space: nowrap; /* Keep the 3-line layout intact */
    }

    .daily-intro-play-button {
      background-color: var(--button-bg);
      border-color: var(--button-bg);
      color: var(--button-text);
      border: none;
      border-radius: 999px;
      padding: 0.72em 2.45em 0.88em 2.45em; /* Asymmetric vertical padding: slightly more top */
      font-family: var(--font-display);
      font-size: 2.3em; /* Increased from 2.1em - bigger button */
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      align-self: center;
      margin-top: 1.5em; /* Scales proportionally with base font size */
      cursor: pointer;
      white-space: nowrap;
      position: relative;
      overflow: hidden;
      transition: transform 0.3s ease;
      line-height: 1;
    }

    /* Shimmer effect on button */
    .daily-intro-play-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 75%;
      height: 100%;
      background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.25), transparent);
      transform: skewX(-20deg);
      transition: left 0.7s ease-in-out;
    }

    @media (hover: hover) and (pointer: fine) {
      .daily-intro-play-button:hover {
        transform: scale(1.05); /* Scale up on hover */
      }
      .daily-intro-play-button:hover::before {
        left: 125%; /* Shimmer slides across */
      }
    }

    .daily-intro-play-button:active {
      transform: scale(0.98); /* Slight press down */
    }

    /* Mobile-specific adjustments */
    @media (max-width: 767px) {
      .daily-intro-screen {
        font-size: clamp(12px, 2.5vw, 20px); /* Larger base font on mobile - scales everything up */
      }

      .daily-intro-content {
        width: 100%;
        max-width: 95%;
        margin: 0 auto;
        padding: 0 clamp(8px, 2vw, 16px);
      }
      
      .daily-intro-message-container {
        gap: 1em; /* Slightly reduce gap on mobile */
      }
    }

    /* Very small screens (iPhone SE, etc.) */
    @media (max-width: 400px) {
      .daily-intro-screen {
        padding: clamp(1.5rem, 5vw, 2rem) clamp(1rem, 4vw, 1.5rem); /* Reduced padding */
        font-size: clamp(11px, 2.8vw, 16px); /* Slightly larger base font even on tiny screens */
      }
      
      /* Keep logomark and text side by side, but reduce sizes */
      .daily-intro-message-container {
        gap: 0.75em; /* Reduce gap slightly */
      }
      
      /* Adjust sizes on very small screens */
      .daily-intro-date {
        font-size: 1.5em; /* Increased for better visibility */
      }
      
      .daily-intro-logomark {
        width: 5.5em; /* Larger for better visibility */
      }
      
      .daily-intro-copy {
        font-size: 1.4em; /* Larger for better readability */
      }
      
      /* Adjust button for very small screens */
      .daily-intro-play-button {
        padding: 0.65em 1.59em 0.71em 1.59em; /* Asymmetric vertical padding: slightly more top */
        font-size: 2.05em; /* Increased for better visibility */
      }
    }

    /* Bonus Day Card */
    .bonus-day-card {
      background-color: #b2a7fe; /* Purple background */
      border: none; /* No border */
      padding: calc(var(--grid-unit) * 1.5) calc(var(--grid-unit) * 3) calc(var(--grid-unit) * 1.4) calc(var(--grid-unit) * 3); /* Match .day-card-summary: 12px top, 24px sides, 11.2px bottom */
      gap: calc(var(--grid-unit) * 1.25); /* 10px gap - match summary card */
      display: flex;
      flex-direction: column;
    }

    .bonus-day-card .day-card-header-summary {
      margin-bottom: 0; /* No margin-bottom - spacing handled by row margin-top */
    }

    /* Row 2: Two Columns */
    .bonus-row-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: calc(var(--grid-unit) * 1.25);
      width: 100%;
      /* No margin-top - parent gap handles spacing */
    }

    .bonus-col-2a {
      min-height: 60px;
      border-radius: calc(var(--grid-unit) * 0.5);
      display: flex;
      align-items: center;
      justify-content: flex-start; /* Align logo to the left */
      padding-left: calc(var(--grid-unit) * 1.25); /* 10px left padding for spacing from edge */
    }

    .bonus-logo {
      width: 96.8%; /* Another 10% increase: 88% * 1.1 = 96.8% */
      height: auto;
      object-fit: contain;
    }

    .bonus-col-2b {
      min-height: 60px;
      border-radius: calc(var(--grid-unit) * 0.5);
      display: flex;
      justify-content: flex-end; /* Right align time box */
      align-items: center;
      padding-right: calc(var(--grid-unit) * 1.25); /* 10px right padding for spacing from edge */
    }

    .bonus-time-box {
      background-color: #f2f1f4; /* White/light purple */
      border: 2px solid #2d2a32; /* Dark charcoal */
      border-radius: clamp(6px, 0.8vw, 8px); /* Fluid border radius */
      width: auto;
      min-width: fit-content;
      height: auto;
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--font-ui); /* Poppins */
      font-weight: 700; /* Bold */
      font-size: clamp(3rem, 8vw, 5rem); /* Fluid font size for mobile */
      color: #2d2a32; /* Dark charcoal */
      padding: calc(var(--grid-unit) * 0.5) calc(var(--grid-unit) * 1); /* 4px top/bottom, 8px left/right */
    }

    /* Tablet/Desktop: Consistent em-based scaling for bonus card row 2 */
    @media (min-width: 768px) {
      .bonus-row-2 {
        gap: 0.625em; /* Match gap in summary card */
        /* No margin-top - parent gap handles spacing */
      }

      .bonus-col-2a,
      .bonus-col-2b {
        height: auto; /* Let content determine height */
        min-height: auto;
        padding: 0.5em 0.625em; /* Consistent padding */
        overflow: visible;
      }

      .bonus-col-2a {
        justify-content: flex-start; /* Left align logo */
      }

      .bonus-col-2b {
        justify-content: flex-end; /* Right align time box */
      }

      .bonus-logo {
        height: 4.5em; /* Scales with card - match day-card-section grid height */
        width: auto;
      }

      .bonus-time-box {
        font-size: 2.5em; /* Scales with card */
        height: auto;
        min-height: auto;
        line-height: 1;
        padding: 0.15em 0.35em;
        border-radius: 0.2em;
        box-sizing: border-box;
      }

      /* Row 2: Match height of ONE puzzle section */
      .bonus-row-2 {
        height: auto;
        min-height: 5.5em;
      }

      .bonus-col-2a,
      .bonus-col-2b {
        height: auto;
        min-height: auto;
      }

      .bonus-logo {
        height: 4.5em;
        width: auto;
      }

      .bonus-time-box {
        font-size: 2.5em;
        height: auto;
        padding: 0.15em 0.3em;
      }

      /* Row 3: Grid container */
      .bonus-row-3 {
        flex: 0 0 auto;
      }

      .bonus-col-3 {
        height: auto;
        min-height: auto;
        display: flex;
        align-items: flex-start;
        justify-content: center;
      }

      .bonus-grid-container {
        width: 100%; /* Fill width */
        max-width: 18em; /* Limit max size */
        height: auto;
        aspect-ratio: 332.25 / 333; /* Match SVG viewBox exactly */
      }

      .bonus-grid-svg {
        width: 100%;
        height: 100%;
        object-fit: fill; /* Fill container exactly - no gaps */
      }
    }

    /* Row 3: One Column */
    .bonus-row-3 {
      width: 100%;
      margin-top: -3px; /* Reduce gap between logo+time and grid */
    }

    .bonus-col-3 {
      border-radius: calc(var(--grid-unit) * 0.5);
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0;
    }

    .bonus-grid-container {
      position: relative;
      display: inline-block; /* Shrink-wrap to content */
      width: clamp(155.73px, 83.04%, 311.45px); /* Match SVG width */
      /* New SVG viewBox: 332.25 x 333 - nearly square */
      aspect-ratio: 332.25 / 333; /* Match new SVG viewBox aspect ratio */
    }

    .bonus-grid-svg {
      width: 100%; /* Fill container */
      height: 100%; /* Fill container */
      object-fit: fill; /* Fill container exactly */
      display: block;
    }

    @media (max-width: 767px) {
      .bonus-grid-container {
        width: clamp(173.15px, 92.33%, 346.30px); /* Match SVG width on mobile */
      }
      .bonus-row-4 {
        margin-top: 0.5em; /* More space on mobile */
      }
    }

    /* Row 4: One Column */
    .bonus-row-4 {
      width: 100%;
      margin-top: -0.5em; /* Reduce gap between grid and share button */
    }

    .bonus-col-4 {
      border-radius: calc(var(--grid-unit) * 0.5);
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Dark mode overrides for Bonus Day Card */
    [data-theme='dark'] .bonus-day-card {
      background-color: #b2a7fe; /* Keep same background */
      border: none; /* Remove border */
    }

    /* ============================================
       MAIN DESIGN STYLES
       ============================================ */
    
    /* Modal button border radius */
    .modal-content .button::after,
    .modal-content .button-primary::after {
      border-radius: 8px !important;
    }

    /* Playable tiles - face and shadow with outline */
    .word-card:not(.locked):not(.revealed)::after {
      background-color: #b0a4fb;
      outline: 2px solid #3b422e;
    }
    .word-card:not(.locked):not(.revealed)::before {
      background-color: #8981bd;
      outline: 2px solid #3b422e;
    }
    /* Playable tile text color in dark mode */
    [data-theme='dark'] .word-card:not(.locked):not(.revealed) {
      color: #3b422e;
    }

    /* Locked/correctly placed tiles and revealed solution tiles - face and shadow */
    .word-card.locked::after,
    .word-card.revealed::after {
      background-color: #9eef80;
      outline: 2px solid #3b422e;
    }
    .word-card.locked::before,
    .word-card.revealed::before {
      background-color: #81c269;
      outline: 2px solid #3b422e;
    }

    /* SUBMIT button - face, shadow, and outline */
    .button.button-submit::after {
      background-color: #b0a4fb;
      outline: 2px solid #3b422e;
    }
    .button.button-submit::before {
      background-color: #8981bd;
      outline: 2px solid #3b422e;
    }
    .button.button-submit {
      color: #3b422e;
    }

    /* All buttons get outline stroke */
    .button::after {
      outline: 2px solid #3b422e;
    }
    .button::before {
      outline: 2px solid #3b422e;
    }

    /* Start screen PLAY button - face and shadow (green) */
    .start-screen-container .button:not(.button-outline):not(.button-signup)::after {
      background-color: #9eef80;
      outline: 2px solid #3b422e;
    }
    .start-screen-container .button:not(.button-outline):not(.button-signup)::before {
      background-color: #81c269;
      outline: 2px solid #3b422e;
    }
    .start-screen-container .button:not(.button-outline):not(.button-signup) {
      color: #3b422e;
    }

    /* Start screen LOGIN button - face and shadow (purple) */
    .start-screen-container .button.button-outline::after {
      background-color: #b0a4fb;
      outline: 2px solid #3b422e;
    }
    .start-screen-container .button.button-outline::before {
      background-color: #8981bd;
      outline: 2px solid #3b422e;
    }
    [data-theme='dark'] .start-screen-container .button.button-outline {
      color: #3b422e;
    }

    /* Start screen SIGN-UP button - face and shadow (purple) */
    .start-screen-container .button.button-signup::after {
      background-color: #b0a4fb;
      outline: 2px solid #3b422e;
    }
    .start-screen-container .button.button-signup::before {
      background-color: #8981bd;
      outline: 2px solid #3b422e;
    }

    /* MiniGrid logomark */
    .mini-grid-wrapper {
      background-color: #3b422e;
    }
    .mini-grid-tile {
      background-color: #9eef80;
    }
    .mini-grid-tile.highlight {
      background-color: #f6e6d9;
    }

    /* Tries circles (dots) */
    .dot {
      border-color: #b0a4fb;
    }
    .dot.active {
      background-color: #b0a4fb;
    }

    /* NEXT PUZZLE and SHOW STATS buttons (button-secondary) */
    .button-secondary::after {
      background-color: #b0a4fb;
      outline: 2px solid #3b422e;
    }
    .button-secondary::before {
      background-color: #8981bd;
      outline: 2px solid #3b422e;
    }
    .button-secondary {
      color: #3b422e;
    }

    /* SHOW LINKLE button (button-outline) */
    .button-outline::after {
      background-color: #f6e6d9;
      outline: 2px solid #3b422e;
    }
    .button-outline::before {
      background-color: #949494;
      outline: 2px solid #3b422e;
    }
    .button-outline {
      color: #3b422e;
    }

    /* Theme toggle colors */
    .theme-toggle svg rect[fill="#E9E2FF"] {
      fill: #f6e6d9;
    }
    .theme-toggle svg rect[fill="#2E2E2E"] {
      fill: #3b422e;
    }

    /* Achievement sheet background */
    .achievement-sheet {
      background: #f6e6d9;
    }
    [data-theme='dark'] .achievement-sheet {
      background: #3b422e;
    }

    /* Bonus splash PLAY button - outline stroke */
    .bonus-splash-play-button::after {
      outline: 2px solid #3b422e;
    }
    .bonus-splash-play-button::before {
      outline: 2px solid #3b422e;
    }

    /* Bonus speed round tiles - red colors with outline stroke */
    .bonus-mode .word-card:not(.locked):not(.revealed)::after {
      background-color: #ff5757;
      outline: 2px solid #3b422e;
    }
    .bonus-mode .word-card:not(.locked):not(.revealed)::before {
      background-color: #cc4646;
      outline: 2px solid #3b422e;
    }
    .ghost-tile.word-card.bonus-mode::after {
      outline: 2px solid #3b422e;
    }
    .ghost-tile.word-card.bonus-mode::before {
      outline: 2px solid #3b422e;
    }

    /* Show Linkle modal word highlight */
    .logic-narrative b {
      background-color: #9eef80;
    }

    /* ============================================
       ALL DONE / STATS SCREEN STYLES
       ============================================ */

    /* Day card background with contrasting stroke */
    .day-card {
      background-color: #f6e6d9;
      box-shadow: inset 0 0 0 2px #3b422e;
    }
    [data-theme='dark'] .day-card {
      background-color: #3b422e;
      box-shadow: inset 0 0 0 2px #f6e6d9;
    }

    /* Day card header text */
    .day-card-header-summary {
      color: #3b422e;
    }
    [data-theme='dark'] .day-card-header-summary {
      color: #f6e6d9;
    }

    /* Day card section labels and text */
    .day-card-section-label {
      color: #3b422e;
    }
    [data-theme='dark'] .day-card-section-label {
      color: #f6e6d9;
    }

    /* Day card section (solved puzzles) - background matches mode */
    .day-card-section:not(.day-card-section-failed) {
      background-color: #f6e6d9;
    }
    [data-theme='dark'] .day-card-section:not(.day-card-section-failed) {
      background-color: #3b422e;
    }

    /* Day card section text colors */
    .day-card-section:not(.day-card-section-failed) .day-card-section-label,
    .day-card-section:not(.day-card-section-failed) .day-card-section-header,
    .day-card-section:not(.day-card-section-failed) .day-card-section-title,
    .day-card-section:not(.day-card-section-failed) .day-card-word-group {
      color: #3b422e;
    }
    [data-theme='dark'] .day-card-section:not(.day-card-section-failed) .day-card-section-label,
    [data-theme='dark'] .day-card-section:not(.day-card-section-failed) .day-card-section-header,
    [data-theme='dark'] .day-card-section:not(.day-card-section-failed) .day-card-section-title,
    [data-theme='dark'] .day-card-section:not(.day-card-section-failed) .day-card-word-group {
      color: #f6e6d9;
    }

    /* Day card playable background with contrasting stroke */
    .day-card-playable {
      background-color: #f6e6d9;
      border: none;
      box-shadow: inset 0 0 0 2px #3b422e;
    }
    [data-theme='dark'] .day-card-playable {
      background-color: #3b422e;
      border: none;
      box-shadow: inset 0 0 0 2px #f6e6d9;
    }

    /* Day card partial background with contrasting stroke */
    .day-card-partial {
      background-color: #f6e6d9;
      border: none;
      box-shadow: inset 0 0 0 2px #3b422e;
    }
    [data-theme='dark'] .day-card-partial {
      background-color: #3b422e;
      border: none;
      box-shadow: inset 0 0 0 2px #f6e6d9;
    }

    /* Playable card header text */
    .day-card-header-playable {
      color: #3b422e;
    }
    [data-theme='dark'] .day-card-header-playable {
      color: #f6e6d9;
    }

    /* Share button - green face and shadow with outline */
    .day-card-share-button::after {
      background-color: #9eef80;
      outline: 2px solid #3b422e;
    }
    .day-card-share-button::before {
      background-color: #81c269;
      outline: 2px solid #3b422e;
    }
    .day-card-share-button {
      color: #3b422e;
    }

    /* Play button on playable cards - green face and shadow with outline */
    .day-card-play-button::after {
      background-color: #9eef80;
      outline: 2px solid #3b422e;
    }
    .day-card-play-button::before {
      background-color: #81c269;
      outline: 2px solid #3b422e;
    }
    .day-card-play-button {
      color: #3b422e;
    }

    /* Grid squares (correct positions) */
    .day-card-square-correct,
    .grid-square-solved {
      background-color: #9eef80;
    }

    /* Grid squares (incorrect positions) */
    .day-card-square-incorrect,
    .grid-square-unsolved {
      background-color: #f6e6d9;
    }

    /* SVG grid squares in day cards */
    .day-card-solved-grid-svg rect[fill="#00bf63"] {
      fill: #9eef80;
    }

    /* Bonus time box - background and stroke */
    .bonus-time-box {
      background-color: #f6e6d9;
      border: none;
      box-shadow: inset 0 0 0 2px #3b422e;
    }
    [data-theme='dark'] .bonus-time-box {
      background-color: #3b422e;
      border: none;
      box-shadow: inset 0 0 0 2px #f6e6d9;
      color: #f6e6d9;
    }

    /* ================================================
       ADMIN DASHBOARD STYLES
       ================================================ */
    
    .admin-dashboard {
      min-height: 100vh;
      font-family: var(--font-ui, 'Space Grotesk', system-ui, sans-serif);
      padding: 0;
      margin: 0;
      width: 100vw;
      position: relative;
      left: 50%;
      right: 50%;
      margin-left: -50vw;
      margin-right: -50vw;
    }
    
    .admin-dashboard.theme-light {
      background: linear-gradient(135deg, #f6e6d9 0%, #eddec9 100%);
      color: #331922;
    }
    
    .admin-dashboard.theme-dark {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: #f0f0f0;
    }

    /* Admin Header */
    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      border-bottom: 1px solid rgba(0,0,0,0.1);
    }
    
    .theme-dark .admin-header {
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .admin-header-left {
      display: flex;
      align-items: center;
      gap: 1.5rem;
    }
    
    .admin-header-left h1 {
      font-size: 1.5rem;
      font-weight: 700;
      margin: 0;
    }
    
    .admin-header-right {
      display: flex;
      gap: 0.5rem;
    }
    
    .admin-back-link {
      color: inherit;
      text-decoration: none;
      opacity: 0.7;
      transition: opacity 0.2s;
    }
    
    .admin-back-link:hover {
      opacity: 1;
    }
    
    .admin-refresh-btn,
    .admin-theme-toggle {
      background: rgba(0,0,0,0.1);
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.2s;
    }
    
    .theme-dark .admin-refresh-btn,
    .theme-dark .admin-theme-toggle {
      background: rgba(255,255,255,0.1);
    }
    
    .admin-refresh-btn:hover,
    .admin-theme-toggle:hover {
      background: rgba(0,0,0,0.2);
    }
    
    .theme-dark .admin-refresh-btn:hover,
    .theme-dark .admin-theme-toggle:hover {
      background: rgba(255,255,255,0.2);
    }

    /* Admin Tabs */
    .admin-tabs {
      display: flex;
      gap: 0;
      padding: 0 2rem;
      border-bottom: 1px solid rgba(0,0,0,0.1);
    }
    
    .theme-dark .admin-tabs {
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .admin-tab {
      padding: 1rem 1.5rem;
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: inherit;
      opacity: 0.6;
      border-bottom: 3px solid transparent;
      transition: all 0.2s;
    }
    
    .admin-tab:hover {
      opacity: 0.8;
    }
    
    /* Mobile scrollable tabs */
    @media (max-width: 768px) {
      .admin-tabs {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        padding: 0 1rem;
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none; /* IE/Edge */
      }
      
      .admin-tabs::-webkit-scrollbar {
        display: none; /* Chrome/Safari */
      }
      
      .admin-tab {
        padding: 0.75rem 1rem;
        font-size: 0.85rem;
        white-space: nowrap;
        flex-shrink: 0;
      }
    }
    
    .admin-tab.active {
      opacity: 1;
      border-bottom-color: #9eef80;
      font-weight: 600;
    }
    
    .theme-light .admin-tab.active {
      border-bottom-color: #331922;
    }

    /* Admin Content */
    .admin-content {
      padding: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .admin-loading {
      text-align: center;
      padding: 4rem;
      font-size: 1.25rem;
      opacity: 0.7;
    }
    
    .admin-error {
      background: #ff6b6b;
      color: white;
      padding: 1rem;
      border-radius: 8px;
      margin: 1rem 2rem;
    }

    /* Access Denied */
    .admin-access-denied {
      text-align: center;
      padding: 4rem 2rem;
    }
    
    .admin-access-denied h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }
    
    .admin-access-denied p {
      font-size: 1.125rem;
      opacity: 0.8;
      margin-bottom: 0.5rem;
    }
    
    .admin-user-info {
      font-size: 0.875rem;
      opacity: 0.6;
      margin-top: 1rem;
    }
    
    .admin-google-signin-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.875rem 1.5rem;
      font-size: 1rem;
      font-weight: 600;
      background: white;
      color: #333;
      border: 2px solid #ddd;
      border-radius: 8px;
      cursor: pointer;
      margin: 1.5rem 0;
      transition: all 0.2s;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .admin-google-signin-btn:hover {
      background: #f8f8f8;
      border-color: #ccc;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }
    
    .theme-dark .admin-google-signin-btn {
      background: #2a2a4a;
      color: #f0f0f0;
      border-color: #444;
    }
    
    .theme-dark .admin-google-signin-btn:hover {
      background: #3a3a5a;
      border-color: #555;
    }

    /* Metrics Tab */
    .admin-metrics-tab h2,
    .admin-metrics-tab h3 {
      margin-top: 2rem;
      margin-bottom: 1rem;
    }
    
    .admin-metrics-tab h2:first-child {
      margin-top: 0;
    }
    
    .admin-metrics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
    }
    
    .admin-metric-card {
      background: rgba(0,0,0,0.05);
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
    }
    
    .theme-dark .admin-metric-card {
      background: rgba(255,255,255,0.05);
    }
    
    .admin-metric-value {
      font-size: 2.5rem;
      font-weight: 700;
      color: #9eef80;
    }
    
    .theme-light .admin-metric-value {
      color: #331922;
    }
    
    .admin-metric-label {
      font-size: 0.875rem;
      opacity: 0.7;
      margin-top: 0.25rem;
    }

    /* Export Data Section */
    .admin-export-section {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem 1.25rem;
      background: linear-gradient(135deg, rgba(158, 239, 128, 0.15), rgba(158, 239, 128, 0.05));
      border: 2px solid rgba(158, 239, 128, 0.3);
      border-radius: 12px;
      margin-bottom: 1.5rem;
    }
    
    .theme-dark .admin-export-section {
      background: linear-gradient(135deg, rgba(158, 239, 128, 0.1), rgba(158, 239, 128, 0.03));
      border-color: rgba(158, 239, 128, 0.2);
    }
    
    .admin-export-btn {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      background: #9eef80;
      color: #1a2e0d;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }
    
    .admin-export-btn:hover {
      background: #8edd70;
      transform: translateY(-1px);
    }
    
    .admin-export-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .admin-export-hint {
      font-size: 0.85rem;
      opacity: 0.7;
    }
    
    @media (max-width: 600px) {
      .admin-export-section {
        flex-direction: column;
        text-align: center;
      }
      
      .admin-export-btn {
        width: 100%;
        justify-content: center;
      }
    }

    /* Engagement Header with Toggle */
    .admin-engagement-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 0.5rem;
    }
    
    .admin-engagement-header h2 {
      margin: 0;
    }
    
    .admin-user-type-toggle {
      display: flex;
      background: rgba(0,0,0,0.1);
      border-radius: 8px;
      padding: 4px;
      gap: 4px;
    }
    
    .theme-dark .admin-user-type-toggle {
      background: rgba(255,255,255,0.1);
    }
    
    .admin-toggle-option {
      padding: 6px 16px;
      border: none;
      background: transparent;
      color: inherit;
      font-size: 0.875rem;
      font-weight: 500;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
      opacity: 0.7;
    }
    
    .admin-toggle-option:hover {
      opacity: 1;
      background: rgba(0,0,0,0.05);
    }
    
    .theme-dark .admin-toggle-option:hover {
      background: rgba(255,255,255,0.05);
    }
    
    .admin-toggle-option.active {
      background: #9eef80;
      color: #1a1a2e;
      opacity: 1;
    }
    
    .theme-light .admin-toggle-option.active {
      background: #331922;
      color: #fff;
    }

    /* Streak Distribution */
    .admin-streak-distribution {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    
    .admin-streak-bar {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .admin-streak-bar-label {
      width: 80px;
      font-size: 0.875rem;
    }
    
    .admin-streak-bar-track {
      flex: 1;
      height: 24px;
      background: rgba(0,0,0,0.1);
      border-radius: 12px;
      overflow: hidden;
    }
    
    .theme-dark .admin-streak-bar-track {
      background: rgba(255,255,255,0.1);
    }
    
    .admin-streak-bar-fill {
      height: 100%;
      background: #ccc;
      border-radius: 12px;
      transition: width 0.5s ease;
    }
    
    .admin-streak-bar-fill-good {
      background: #9eef80;
    }
    
    .theme-light .admin-streak-bar-fill-good {
      background: #4ade80;
    }
    
    .admin-streak-bar-fill-great {
      background: #6dd5ed;
    }
    
    .admin-streak-bar-fill-legendary {
      background: linear-gradient(90deg, #f9d423, #ff4e50);
    }
    
    .admin-streak-bar-count {
      width: 40px;
      text-align: right;
      font-weight: 600;
    }

    /* Difficulty Stats */
    .admin-difficulty-stats {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .admin-difficulty-row {
      display: flex;
      align-items: center;
      gap: 2rem;
      padding: 0.75rem 1rem;
      background: rgba(0,0,0,0.03);
      border-radius: 8px;
    }
    
    .theme-dark .admin-difficulty-row {
      background: rgba(255,255,255,0.03);
    }
    
    .admin-difficulty-name {
      width: 100px;
      font-weight: 600;
    }
    
    .admin-difficulty-stat {
      display: flex;
      gap: 0.5rem;
    }
    
    .admin-stat-label {
      opacity: 0.6;
    }
    
    .admin-stat-value {
      font-weight: 600;
    }

    /* Totals */
    .admin-totals {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      margin-top: 1.5rem;
      padding-top: 1.5rem;
      border-top: 1px solid rgba(0,0,0,0.1);
    }
    
    .theme-dark .admin-totals {
      border-top-color: rgba(255,255,255,0.1);
    }
    
    .admin-total-item {
      display: flex;
      gap: 0.5rem;
    }
    
    .admin-total-label {
      opacity: 0.7;
    }
    
    .admin-total-value {
      font-weight: 700;
      color: #9eef80;
    }
    
    .theme-light .admin-total-value {
      color: #331922;
    }

    /* Bonus Speed Round Metrics */
    .admin-bonus-metrics {
      margin-top: 1rem;
    }
    
    .admin-bonus-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .admin-bonus-card {
      background: linear-gradient(135deg, rgba(255, 193, 7, 0.15) 0%, rgba(255, 152, 0, 0.1) 100%);
      border: 1px solid rgba(255, 193, 7, 0.3);
      border-radius: 12px;
      padding: 1.25rem;
      text-align: center;
    }
    
    .theme-dark .admin-bonus-card {
      background: linear-gradient(135deg, rgba(255, 193, 7, 0.2) 0%, rgba(255, 152, 0, 0.15) 100%);
      border-color: rgba(255, 193, 7, 0.4);
    }
    
    .admin-bonus-value {
      font-size: 1.75rem;
      font-weight: 700;
      color: #f59e0b;
    }
    
    .theme-light .admin-bonus-value {
      color: #d97706;
    }
    
    .admin-bonus-label {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-top: 0.25rem;
    }
    
    .admin-bonus-times {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      padding: 1rem 1.25rem;
      background: rgba(0,0,0,0.03);
      border-radius: 8px;
    }
    
    .theme-dark .admin-bonus-times {
      background: rgba(255,255,255,0.03);
    }
    
    .admin-bonus-time-item {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }
    
    .admin-bonus-time-label {
      opacity: 0.7;
    }
    
    .admin-bonus-time-value {
      font-weight: 600;
      font-size: 1.1rem;
    }
    
    .admin-bonus-fastest {
      color: #f59e0b;
    }
    
    .theme-light .admin-bonus-fastest {
      color: #d97706;
    }

    /* Conversion Funnel */
    .admin-conversion-funnel,
    .admin-share-metrics {
      margin-top: 1rem;
    }
    
    .admin-funnel-stats {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      flex-wrap: wrap;
      padding: 1.5rem;
      background: rgba(0,0,0,0.03);
      border-radius: 12px;
    }
    
    .theme-dark .admin-funnel-stats {
      background: rgba(255,255,255,0.03);
    }
    
    .admin-funnel-stat {
      text-align: center;
      padding: 1rem 1.5rem;
      background: rgba(255,255,255,0.5);
      border-radius: 8px;
      min-width: 100px;
    }
    
    .theme-dark .admin-funnel-stat {
      background: rgba(0,0,0,0.2);
    }
    
    .admin-funnel-stat-highlight {
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.2) 0%, rgba(22, 163, 74, 0.15) 100%);
      border: 1px solid rgba(34, 197, 94, 0.3);
    }
    
    .theme-dark .admin-funnel-stat-highlight {
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.25) 0%, rgba(22, 163, 74, 0.2) 100%);
    }
    
    .admin-funnel-value {
      font-size: 1.75rem;
      font-weight: 700;
    }
    
    .admin-funnel-label {
      font-size: 0.8rem;
      opacity: 0.7;
      margin-top: 0.25rem;
    }
    
    .admin-funnel-rate {
      font-size: 0.75rem;
      color: #22c55e;
      margin-top: 0.25rem;
      font-weight: 600;
    }
    
    .theme-light .admin-funnel-rate {
      color: #16a34a;
    }
    
    .admin-funnel-arrow {
      font-size: 1.5rem;
      opacity: 0.3;
      padding: 0 0.5rem;
    }
    
    .admin-conversion-insight {
      margin-top: 1rem;
      padding: 1rem 1.25rem;
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(37, 99, 235, 0.08) 100%);
      border: 1px solid rgba(59, 130, 246, 0.2);
      border-radius: 8px;
    }
    
    .theme-dark .admin-conversion-insight {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(37, 99, 235, 0.12) 100%);
    }
    
    .admin-insight-title {
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    
    .admin-insight-stat {
      margin-bottom: 0.5rem;
    }
    
    .admin-puzzles-distribution {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }
    
    .admin-dist-badge {
      background: rgba(0,0,0,0.1);
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.75rem;
    }
    
    .theme-dark .admin-dist-badge {
      background: rgba(255,255,255,0.1);
    }

    /* Play Time Distribution */
    .admin-playtime-distribution {
      margin-top: 1rem;
    }
    
    .admin-playtime-chart {
      display: flex;
      align-items: flex-end;
      height: 120px;
      gap: 2px;
      padding: 1rem;
      background: rgba(0,0,0,0.03);
      border-radius: 12px;
    }
    
    .theme-dark .admin-playtime-chart {
      background: rgba(255,255,255,0.03);
    }
    
    .admin-playtime-bar-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      height: 100%;
    }
    
    .admin-playtime-bar {
      width: 100%;
      max-width: 20px;
      background: linear-gradient(180deg, #60a5fa 0%, #3b82f6 100%);
      border-radius: 3px 3px 0 0;
      min-height: 2px;
      transition: height 0.3s ease;
      margin-top: auto;
    }
    
    .admin-playtime-bar.peak {
      background: linear-gradient(180deg, #4ade80 0%, #22c55e 100%);
    }
    
    .admin-playtime-label {
      font-size: 0.6rem;
      opacity: 0.6;
      margin-top: 4px;
      height: 14px;
      white-space: nowrap;
    }
    
    .admin-playtime-insight {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 0.75rem;
      padding: 0.5rem 0;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    
    .admin-playtime-peak {
      font-size: 0.9rem;
    }
    
    .admin-playtime-total {
      font-size: 0.8rem;
      opacity: 0.6;
    }

    /* Anonymous Tab */
    .admin-anonymous-tab h2 {
      font-size: 1.5rem;
      margin-bottom: 0.25rem;
    }
    
    .admin-anonymous-tab h3 {
      font-size: 1.1rem;
      margin-top: 2rem;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid rgba(0,0,0,0.1);
    }
    
    .theme-dark .admin-anonymous-tab h3 {
      border-bottom-color: rgba(255,255,255,0.1);
    }
    
    .admin-engagement-breakdown {
      padding: 1rem;
      background: rgba(0,0,0,0.03);
      border-radius: 12px;
    }
    
    .theme-dark .admin-engagement-breakdown {
      background: rgba(255,255,255,0.03);
    }
    
    .admin-engagement-bar {
      display: flex;
      gap: 4px;
      min-height: 60px;
      border-radius: 8px;
      overflow: hidden;
    }
    
    .admin-engagement-segment {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 0.75rem;
      min-width: 80px;
      border-radius: 8px;
    }
    
    .admin-engagement-segment.one-puzzle {
      background: linear-gradient(135deg, #fca5a5 0%, #f87171 100%);
      color: #7f1d1d;
    }
    
    .admin-engagement-segment.two-to-five {
      background: linear-gradient(135deg, #fcd34d 0%, #fbbf24 100%);
      color: #78350f;
    }
    
    .admin-engagement-segment.six-plus {
      background: linear-gradient(135deg, #86efac 0%, #4ade80 100%);
      color: #14532d;
    }
    
    .admin-engagement-count {
      font-size: 1.5rem;
      font-weight: 700;
    }
    
    .admin-engagement-label {
      font-size: 0.75rem;
      font-weight: 500;
      opacity: 0.9;
    }
    
    .admin-conversion-comparison {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1.5rem;
      padding: 1.5rem;
      background: rgba(0,0,0,0.03);
      border-radius: 12px;
    }
    
    .theme-dark .admin-conversion-comparison {
      background: rgba(255,255,255,0.03);
    }
    
    .admin-comparison-card {
      text-align: center;
      padding: 1rem;
      flex: 1;
      max-width: 200px;
    }
    
    .admin-comparison-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--color-accent);
    }
    
    .admin-comparison-label {
      font-size: 0.85rem;
      font-weight: 500;
      margin-top: 0.25rem;
    }
    
    .admin-comparison-sub {
      font-size: 0.75rem;
      opacity: 0.6;
      margin-top: 0.25rem;
    }
    
    .admin-comparison-vs {
      font-size: 1rem;
      font-weight: 700;
      opacity: 0.4;
    }
    
    .admin-anonymous-table {
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid rgba(0,0,0,0.1);
    }
    
    .theme-dark .admin-anonymous-table {
      border-color: rgba(255,255,255,0.1);
    }
    
    .admin-anonymous-header {
      display: grid;
      grid-template-columns: 1.5fr 0.8fr 0.8fr 1fr 1fr;
      gap: 0.5rem;
      padding: 0.75rem 1rem;
      background: rgba(0,0,0,0.05);
      font-weight: 600;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .theme-dark .admin-anonymous-header {
      background: rgba(255,255,255,0.05);
    }
    
    .admin-anonymous-row {
      display: grid;
      grid-template-columns: 1.5fr 0.8fr 0.8fr 1fr 1fr;
      gap: 0.5rem;
      padding: 0.75rem 1rem;
      border-top: 1px solid rgba(0,0,0,0.05);
      font-size: 0.875rem;
    }
    
    .theme-dark .admin-anonymous-row {
      border-top-color: rgba(255,255,255,0.05);
    }
    
    .admin-anonymous-row.power-user {
      background: linear-gradient(90deg, rgba(251, 191, 36, 0.1) 0%, transparent 50%);
    }
    
    .admin-anonymous-row.converted {
      background: linear-gradient(90deg, rgba(34, 197, 94, 0.1) 0%, transparent 50%);
    }
    
    .admin-metric-card.highlight-green {
      border: 2px solid rgba(34, 197, 94, 0.3);
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.08) 0%, transparent 100%);
    }
    
    .admin-metric-card.highlight-green .admin-metric-value {
      color: #22c55e;
    }
    
    .theme-dark .admin-metric-card.highlight-green .admin-metric-value {
      color: #4ade80;
    }
    
    .admin-anon-col-converted {
      text-align: center;
      font-size: 0.85rem;
    }
    
    .admin-anon-col-id {
      font-family: monospace;
      font-size: 0.8rem;
      opacity: 0.8;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .admin-anon-col-puzzles,
    .admin-anon-col-winrate {
      text-align: center;
      font-weight: 500;
    }
    
    .admin-anon-col-first,
    .admin-anon-col-last {
      font-size: 0.8rem;
      opacity: 0.7;
    }
    
    .admin-toggle-btn {
      margin-top: 0.5rem;
      padding: 0.5rem 1rem;
      background: rgba(0,0,0,0.05);
      border: 1px solid rgba(0,0,0,0.1);
      border-radius: 8px;
      font-size: 0.875rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .theme-dark .admin-toggle-btn {
      background: rgba(255,255,255,0.05);
      border-color: rgba(255,255,255,0.1);
    }
    
    .admin-toggle-btn:hover {
      background: rgba(0,0,0,0.1);
    }
    
    .theme-dark .admin-toggle-btn:hover {
      background: rgba(255,255,255,0.1);
    }
    
    /* Score Distribution Styles */
    .admin-score-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .admin-metric-card.highlight-gold {
      border: 2px solid rgba(251, 191, 36, 0.4);
      background: linear-gradient(135deg, rgba(251, 191, 36, 0.12) 0%, transparent 100%);
    }
    
    .admin-metric-card.highlight-gold .admin-metric-value {
      color: #d97706;
    }
    
    .theme-dark .admin-metric-card.highlight-gold .admin-metric-value {
      color: #fbbf24;
    }
    
    .admin-score-distribution-table {
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid rgba(0,0,0,0.1);
      margin-bottom: 1rem;
    }
    
    .theme-dark .admin-score-distribution-table {
      border-color: rgba(255,255,255,0.1);
    }
    
    .admin-score-dist-header {
      display: grid;
      grid-template-columns: 120px 80px 1fr;
      gap: 0.5rem;
      padding: 0.75rem 1rem;
      background: rgba(0,0,0,0.05);
      font-weight: 600;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .theme-dark .admin-score-dist-header {
      background: rgba(255,255,255,0.05);
    }
    
    .admin-score-dist-row {
      display: grid;
      grid-template-columns: 120px 80px 1fr;
      gap: 0.5rem;
      padding: 0.6rem 1rem;
      border-top: 1px solid rgba(0,0,0,0.05);
      font-size: 0.875rem;
      opacity: 0.5;
    }
    
    .admin-score-dist-row.has-visitors {
      opacity: 1;
    }
    
    .theme-dark .admin-score-dist-row {
      border-top-color: rgba(255,255,255,0.05);
    }
    
    .admin-score-dist-col-tier {
      font-weight: 500;
    }
    
    .admin-score-dist-col-count {
      text-align: center;
      font-weight: 600;
      color: #7c3aed;
    }
    
    .theme-dark .admin-score-dist-col-count {
      color: #a78bfa;
    }
    
    .admin-score-dist-col-bar {
      display: flex;
      align-items: center;
      padding-right: 1rem;
    }
    
    .admin-score-dist-bar-fill {
      height: 16px;
      background: linear-gradient(90deg, #7c3aed 0%, #a78bfa 100%);
      border-radius: 4px;
      min-width: 2px;
      transition: width 0.3s ease;
    }
    
    .theme-dark .admin-score-dist-bar-fill {
      background: linear-gradient(90deg, #a78bfa 0%, #c4b5fd 100%);
    }
    
    .admin-anonymous-row.high-score {
      background: linear-gradient(90deg, rgba(251, 191, 36, 0.12) 0%, transparent 50%);
    }
    
    .admin-anon-col-score {
      text-align: center;
      font-weight: 600;
      color: #d97706;
    }
    
    .theme-dark .admin-anon-col-score {
      color: #fbbf24;
    }
    
    .admin-no-data {
      padding: 2rem;
      text-align: center;
      background: rgba(0,0,0,0.03);
      border-radius: 12px;
      opacity: 0.6;
      font-style: italic;
    }
    
    .theme-dark .admin-no-data {
      background: rgba(255,255,255,0.03);
    }
    
    /* Mobile responsive for Anonymous tab */
    @media (max-width: 600px) {
      .admin-engagement-bar {
        flex-direction: column;
      }
      
      .admin-engagement-segment {
        min-width: auto;
        flex-direction: row;
        justify-content: space-between;
        padding: 0.5rem 1rem;
      }
      
      .admin-engagement-count {
        font-size: 1.25rem;
      }
      
      .admin-conversion-comparison {
        flex-direction: column;
        gap: 0.5rem;
      }
      
      .admin-comparison-vs {
        display: none;
      }
      
      .admin-comparison-card {
        max-width: none;
        width: 100%;
        padding: 0.75rem;
      }
      
      .admin-comparison-value {
        font-size: 1.5rem;
      }
      
      .admin-anonymous-header,
      .admin-anonymous-row {
        grid-template-columns: 1fr 0.6fr 0.6fr;
      }
      
      .admin-anon-col-first,
      .admin-anon-col-last,
      .admin-anon-col-converted {
        display: none;
      }
      
      .admin-anonymous-header .admin-anon-col-first,
      .admin-anonymous-header .admin-anon-col-last,
      .admin-anonymous-header .admin-anon-col-converted {
        display: none;
      }
    }

    /* Retention Tab Styles */
    .admin-retention-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 0.5rem;
    }
    
    .admin-retention-header h2 {
      margin: 0;
    }
    
    .admin-retention-toggle {
      /* Uses .admin-user-type-toggle base styles */
    }
    
    .admin-retention-summary {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }
    
    .admin-retention-stat {
      flex: 1;
      min-width: 120px;
      background: rgba(0,0,0,0.03);
      border-radius: 12px;
      padding: 1.25rem;
      text-align: center;
    }
    
    .theme-dark .admin-retention-stat {
      background: rgba(255,255,255,0.05);
    }
    
    .admin-retention-value {
      font-size: 2.5rem;
      font-weight: 700;
      line-height: 1;
      margin-bottom: 0.25rem;
    }
    
    .admin-retention-label {
      font-size: 0.9rem;
      font-weight: 600;
      opacity: 0.9;
    }
    
    .admin-retention-sub {
      font-size: 0.75rem;
      opacity: 0.6;
      margin-top: 0.25rem;
    }
    
    .admin-retention-insights {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }
    
    .admin-insight-card {
      flex: 1;
      min-width: 200px;
      display: flex;
      gap: 1rem;
      align-items: center;
      background: linear-gradient(135deg, rgba(158,239,128,0.1), rgba(158,239,128,0.05));
      border: 1px solid rgba(158,239,128,0.3);
      border-radius: 12px;
      padding: 1rem 1.25rem;
    }
    
    .theme-dark .admin-insight-card {
      background: linear-gradient(135deg, rgba(158,239,128,0.15), rgba(158,239,128,0.05));
    }
    
    .admin-insight-icon {
      font-size: 2rem;
    }
    
    .admin-insight-content {
      flex: 1;
    }
    
    .admin-insight-value {
      font-size: 1.5rem;
      font-weight: 700;
    }
    
    .admin-insight-label {
      font-size: 0.85rem;
      font-weight: 600;
      opacity: 0.9;
    }
    
    .admin-insight-desc {
      font-size: 0.75rem;
      opacity: 0.6;
    }
    
    .admin-section-desc {
      font-size: 0.875rem;
      opacity: 0.7;
      margin-bottom: 1rem;
    }
    
    .admin-cohort-table {
      background: rgba(0,0,0,0.02);
      border-radius: 12px;
      overflow: hidden;
    }
    
    .theme-dark .admin-cohort-table {
      background: rgba(255,255,255,0.03);
    }
    
    .admin-cohort-header,
    .admin-cohort-row {
      display: grid;
      grid-template-columns: 1.2fr 0.8fr 1fr 1fr 1fr;
      gap: 0.5rem;
      padding: 0.75rem 1rem;
      align-items: center;
    }
    
    .admin-cohort-header {
      background: rgba(0,0,0,0.05);
      font-weight: 600;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.03em;
    }
    
    .theme-dark .admin-cohort-header {
      background: rgba(255,255,255,0.08);
    }
    
    .admin-cohort-row {
      border-top: 1px solid rgba(0,0,0,0.05);
    }
    
    .theme-dark .admin-cohort-row {
      border-top-color: rgba(255,255,255,0.05);
    }
    
    .admin-cohort-row:hover {
      background: rgba(0,0,0,0.03);
    }
    
    .theme-dark .admin-cohort-row:hover {
      background: rgba(255,255,255,0.05);
    }
    
    .admin-cohort-col-week {
      font-weight: 500;
    }
    
    .admin-cohort-col-new {
      text-align: center;
      font-weight: 600;
    }
    
    .admin-cohort-col-d1,
    .admin-cohort-col-d7,
    .admin-cohort-col-d28 {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .admin-retention-badge {
      display: inline-block;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.85rem;
      font-weight: 600;
      color: white;
      min-width: 45px;
      text-align: center;
    }
    
    .admin-cohort-count {
      font-size: 0.75rem;
      opacity: 0.6;
    }
    
    .admin-retention-guide {
      margin-top: 2rem;
      padding: 1.25rem;
      background: rgba(0,0,0,0.03);
      border-radius: 12px;
      font-size: 0.875rem;
    }
    
    .theme-dark .admin-retention-guide {
      background: rgba(255,255,255,0.03);
    }
    
    .admin-retention-guide h4 {
      margin: 0 0 0.75rem 0;
      font-size: 1rem;
    }
    
    .admin-retention-guide ul {
      margin: 0 0 1rem 0;
      padding-left: 1.25rem;
    }
    
    .admin-retention-guide li {
      margin-bottom: 0.5rem;
      line-height: 1.4;
    }
    
    .admin-retention-benchmarks {
      margin: 0;
      padding-top: 0.75rem;
      border-top: 1px solid rgba(0,0,0,0.1);
      opacity: 0.8;
    }
    
    .theme-dark .admin-retention-benchmarks {
      border-top-color: rgba(255,255,255,0.1);
    }
    
    /* Mobile responsive for Retention tab */
    @media (max-width: 600px) {
      .admin-retention-header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .admin-retention-toggle .admin-toggle-option {
        padding: 0.4rem 0.6rem;
        font-size: 0.8rem;
      }
      
      .admin-retention-summary {
        flex-direction: column;
      }
      
      .admin-retention-stat {
        min-width: auto;
      }
      
      .admin-retention-value {
        font-size: 2rem;
      }
      
      .admin-retention-insights {
        flex-direction: column;
      }
      
      .admin-cohort-header,
      .admin-cohort-row {
        grid-template-columns: 1fr 0.6fr 0.8fr 0.8fr;
        font-size: 0.85rem;
      }
      
      .admin-cohort-col-d28 {
        display: none;
      }
      
      .admin-cohort-header .admin-cohort-col-d28 {
        display: none;
      }
      
      .admin-retention-badge {
        min-width: 40px;
        font-size: 0.8rem;
        padding: 0.2rem 0.4rem;
      }
      
      .admin-cohort-count {
        display: none;
      }
    }

    /* ===== TRENDS TAB STYLES ===== */
    .admin-trends-tab {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }
    
    .admin-trends-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }
    
    .admin-trends-header h2 {
      margin: 0;
    }
    
    .admin-trends-controls {
      display: flex;
      gap: 1rem;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .admin-time-range-selector {
      display: flex;
      gap: 0.25rem;
      background: rgba(0,0,0,0.05);
      padding: 4px;
      border-radius: 8px;
    }
    
    .theme-dark .admin-time-range-selector {
      background: rgba(255,255,255,0.05);
    }
    
    .admin-time-btn {
      padding: 0.5rem 1rem;
      border: none;
      background: transparent;
      cursor: pointer;
      border-radius: 6px;
      font-size: 0.85rem;
      color: inherit;
      opacity: 0.7;
      transition: all 0.2s;
    }
    
    .admin-time-btn:hover {
      opacity: 1;
      background: rgba(0,0,0,0.05);
    }
    
    .theme-dark .admin-time-btn:hover {
      background: rgba(255,255,255,0.05);
    }
    
    .admin-time-btn.active {
      background: #9eef80;
      color: #1a2e0d;
      opacity: 1;
      font-weight: 600;
    }
    
    .theme-dark .admin-time-btn.active {
      background: #9eef80;
      color: #1a2e0d;
    }
    
    .admin-trends-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
    }
    
    .admin-trend-panel {
      background: rgba(255,255,255,0.5);
      border-radius: 12px;
      padding: 1.25rem;
      border: 1px solid rgba(0,0,0,0.1);
    }
    
    .theme-dark .admin-trend-panel {
      background: rgba(0,0,0,0.2);
      border-color: rgba(255,255,255,0.1);
    }
    
    .admin-trend-panel h3 {
      margin: 0 0 1rem 0;
      font-size: 1rem;
      font-weight: 600;
    }
    
    .admin-trend-chart {
      width: 100%;
      height: 250px;
    }
    
    /* Trends tooltip */
    .trends-tooltip {
      background: rgba(255,255,255,0.95);
      border: 1px solid rgba(0,0,0,0.1);
      border-radius: 8px;
      padding: 0.75rem 1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    
    .theme-dark .trends-tooltip {
      background: rgba(30,30,40,0.95);
      border-color: rgba(255,255,255,0.1);
    }
    
    .trends-tooltip-label {
      font-weight: 600;
      margin: 0 0 0.5rem 0;
      font-size: 0.9rem;
    }
    
    .trends-tooltip-value {
      margin: 0.25rem 0;
      font-size: 0.85rem;
    }
    
    /* Recharts legend styling */
    .admin-trend-panel .recharts-legend-wrapper {
      font-size: 0.8rem !important;
    }
    
    .admin-trend-panel .recharts-legend-item-text {
      color: inherit !important;
    }
    
    /* Mobile responsive for Trends tab */
    @media (max-width: 900px) {
      .admin-trends-grid {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 600px) {
      .admin-trends-header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .admin-time-range-selector {
        width: 100%;
        justify-content: space-between;
      }
      
      .admin-time-btn {
        flex: 1;
        text-align: center;
        padding: 0.5rem 0.5rem;
        font-size: 0.8rem;
      }
      
      .admin-trend-chart {
        height: 200px;
      }
    }

    /* ===== INSIGHTS TAB STYLES ===== */
    .admin-insights-tab {
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }
    
    .admin-insights-panel {
      background: rgba(255,255,255,0.5);
      border-radius: 12px;
      padding: 1.5rem;
      border: 1px solid rgba(0,0,0,0.1);
    }
    
    .theme-dark .admin-insights-panel {
      background: rgba(0,0,0,0.2);
      border-color: rgba(255,255,255,0.1);
    }
    
    .admin-insights-panel h2 {
      margin: 0 0 0.5rem 0;
      font-size: 1.4rem;
    }
    
    .admin-insights-panel h3 {
      margin: 1.5rem 0 0.75rem 0;
      font-size: 1.1rem;
      opacity: 0.9;
    }
    
    .admin-insights-panel h4 {
      margin: 1rem 0 0.5rem 0;
      font-size: 0.95rem;
      opacity: 0.8;
    }
    
    /* Puzzle Quality Table */
    .admin-puzzle-quality-table {
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid rgba(0,0,0,0.1);
    }
    
    .theme-dark .admin-puzzle-quality-table {
      border-color: rgba(255,255,255,0.1);
    }
    
    .admin-pq-header,
    .admin-pq-row {
      display: grid;
      grid-template-columns: 1.2fr 0.8fr 1fr 0.8fr 0.8fr;
      gap: 0.5rem;
      padding: 0.75rem 1rem;
      align-items: center;
    }
    
    .admin-pq-header {
      background: rgba(0,0,0,0.05);
      font-weight: 600;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .theme-dark .admin-pq-header {
      background: rgba(255,255,255,0.05);
    }
    
    .admin-pq-row {
      border-top: 1px solid rgba(0,0,0,0.05);
    }
    
    .theme-dark .admin-pq-row {
      border-color: rgba(255,255,255,0.05);
    }
    
    .admin-diff-badge {
      padding: 0.25rem 0.6rem;
      border-radius: 4px;
      font-size: 0.85rem;
      font-weight: 600;
      display: inline-block;
    }
    
    .admin-diff-easy { background: #9eef80; color: #1a2e0d; }
    .admin-diff-hard { background: #f0dc58; color: #3d3600; }
    .admin-diff-impossible { background: #f08080; color: #4a0000; }
    .admin-diff-bonus { background: #80c0f0; color: #002a4a; }
    
    .admin-rate-badge {
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      font-size: 0.85rem;
      font-weight: 500;
    }
    
    .admin-rate-badge.good { background: rgba(34, 197, 94, 0.2); color: #16a34a; }
    .admin-rate-badge.ok { background: rgba(234, 179, 8, 0.2); color: #ca8a04; }
    .admin-rate-badge.low { background: rgba(239, 68, 68, 0.2); color: #dc2626; }
    
    .theme-dark .admin-rate-badge.good { color: #4ade80; }
    .theme-dark .admin-rate-badge.ok { color: #fbbf24; }
    .theme-dark .admin-rate-badge.low { color: #f87171; }
    
    /* Puzzle Lists (Struggle/Satisfying) */
    .admin-puzzle-lists {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
      margin-top: 1rem;
    }
    
    .admin-puzzle-list h4 {
      margin: 0 0 0.25rem 0;
    }
    
    .admin-list-hint {
      font-size: 0.8rem;
      opacity: 0.6;
      margin: 0 0 0.75rem 0;
    }
    
    .admin-puzzle-items {
      list-style: none;
      margin: 0;
      padding: 0;
    }
    
    .admin-puzzle-item {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      padding: 0.6rem 0.75rem;
      border-radius: 6px;
      margin-bottom: 0.4rem;
      font-size: 0.9rem;
    }
    
    .admin-puzzle-header {
      display: flex;
      gap: 0.75rem;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .admin-puzzle-words {
      font-size: 0.8rem;
      opacity: 0.75;
      font-family: monospace;
      letter-spacing: 0.3px;
      padding-left: 0.25rem;
    }
    
    .admin-puzzle-item.struggle {
      background: rgba(239, 68, 68, 0.1);
    }
    
    .admin-puzzle-item.satisfying {
      background: rgba(34, 197, 94, 0.1);
    }
    
    .admin-puzzle-id {
      font-weight: 600;
      min-width: 40px;
    }
    
    .admin-puzzle-diff {
      font-size: 0.75rem;
      opacity: 0.7;
      text-transform: uppercase;
    }
    
    .admin-puzzle-stat {
      font-size: 0.85rem;
      opacity: 0.8;
    }
    
    .admin-no-items {
      font-size: 0.85rem;
      opacity: 0.5;
      font-style: italic;
    }
    
    .admin-analyzed-count {
      font-size: 0.8rem;
      opacity: 0.5;
      margin-top: 1rem;
      text-align: center;
    }
    
    /* Engagement Grid */
    .admin-engagement-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
    }
    
    .admin-engagement-card {
      background: rgba(255,255,255,0.5);
      border-radius: 10px;
      padding: 1.25rem;
      text-align: center;
      border: 1px solid rgba(0,0,0,0.08);
    }
    
    .theme-dark .admin-engagement-card {
      background: rgba(0,0,0,0.2);
      border-color: rgba(255,255,255,0.08);
    }
    
    .admin-engagement-value {
      font-size: 2rem;
      font-weight: 700;
      color: #9eef80;
    }
    
    .admin-engagement-label {
      font-size: 0.9rem;
      font-weight: 600;
      margin-top: 0.25rem;
    }
    
    .admin-engagement-sub {
      font-size: 0.8rem;
      opacity: 0.6;
      margin-top: 0.25rem;
    }
    
    /* Badge Table */
    .admin-badge-table {
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid rgba(0,0,0,0.1);
    }
    
    .theme-dark .admin-badge-table {
      border-color: rgba(255,255,255,0.1);
    }
    
    .admin-badge-header,
    .admin-badge-row {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      gap: 0.5rem;
      padding: 0.6rem 1rem;
      align-items: center;
    }
    
    .admin-badge-header {
      background: rgba(0,0,0,0.05);
      font-weight: 600;
      font-size: 0.8rem;
      text-transform: uppercase;
    }
    
    .theme-dark .admin-badge-header {
      background: rgba(255,255,255,0.05);
    }
    
    .admin-badge-row {
      border-top: 1px solid rgba(0,0,0,0.05);
      font-size: 0.9rem;
    }
    
    .theme-dark .admin-badge-row {
      border-color: rgba(255,255,255,0.05);
    }
    
    /* Feature Usage Grid */
    .admin-feature-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
    }
    
    .admin-feature-section h3 {
      margin-top: 0;
    }
    
    .admin-feature-stats {
      display: flex;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    
    .admin-feature-stat {
      flex: 1;
      text-align: center;
      padding: 0.75rem;
      background: rgba(255,255,255,0.5);
      border-radius: 8px;
      border: 1px solid rgba(0,0,0,0.05);
    }
    
    .theme-dark .admin-feature-stat {
      background: rgba(0,0,0,0.2);
      border-color: rgba(255,255,255,0.05);
    }
    
    .admin-feature-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: #9eef80;
    }
    
    .admin-feature-label {
      font-size: 0.75rem;
      opacity: 0.7;
      text-transform: uppercase;
    }
    
    /* Days Ago Distribution Chart */
    .admin-days-ago-chart {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .admin-days-ago-bar {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .admin-days-ago-label {
      width: 80px;
      font-size: 0.8rem;
      text-align: right;
      opacity: 0.7;
    }
    
    .admin-days-ago-track {
      flex: 1;
      height: 16px;
      background: rgba(0,0,0,0.1);
      border-radius: 8px;
      overflow: hidden;
    }
    
    .theme-dark .admin-days-ago-track {
      background: rgba(255,255,255,0.1);
    }
    
    .admin-days-ago-fill {
      height: 100%;
      background: #9eef80;
      border-radius: 8px;
      min-width: 2px;
    }
    
    .admin-days-ago-count {
      width: 30px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    
    /* Theme Stats */
    .admin-theme-stats {
      margin-top: 0.5rem;
    }
    
    .admin-theme-bar {
      display: flex;
      border-radius: 8px;
      overflow: hidden;
      height: 40px;
      border: 1px solid rgba(0,0,0,0.1);
    }
    
    .theme-dark .admin-theme-bar {
      border-color: rgba(255,255,255,0.1);
    }
    
    .admin-theme-segment {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      font-weight: 600;
      min-width: 60px;
    }
    
    .admin-theme-segment.light {
      background: #f5f5dc;
      color: #333;
    }
    
    .admin-theme-segment.dark {
      background: #333;
      color: #f5f5dc;
    }
    
    .admin-theme-counts {
      display: flex;
      gap: 1.5rem;
      margin-top: 0.75rem;
      font-size: 0.85rem;
      opacity: 0.7;
    }
    
    /* Responsive adjustments for Insights tab */
    @media (max-width: 768px) {
      .admin-puzzle-lists {
        grid-template-columns: 1fr;
      }
      
      .admin-engagement-grid {
        grid-template-columns: 1fr;
      }
      
      .admin-feature-grid {
        grid-template-columns: 1fr;
      }
      
      .admin-pq-header,
      .admin-pq-row {
        grid-template-columns: 1fr 0.6fr 0.8fr 0.6fr;
        font-size: 0.85rem;
      }
      
      .admin-pq-col-time {
        display: none;
      }
      
      .admin-feature-stats {
        flex-wrap: wrap;
      }
      
      .admin-theme-counts {
        flex-direction: column;
        gap: 0.5rem;
      }
    }

    /* ===== GROWTH TAB STYLES ===== */
    .admin-growth-tab {
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }
    
    .growth-row {
      background: rgba(255,255,255,0.4);
      border-radius: 16px;
      padding: 1.5rem;
      border: 1px solid rgba(0,0,0,0.08);
    }
    
    .theme-dark .growth-row {
      background: rgba(0,0,0,0.25);
      border-color: rgba(255,255,255,0.08);
    }
    
    .growth-row-header {
      margin-bottom: 1.25rem;
    }
    
    .growth-row-header h3 {
      margin: 0 0 0.25rem 0;
      font-size: 1.15rem;
      font-weight: 700;
    }
    
    .growth-row-description {
      margin: 0;
      font-size: 0.9rem;
      opacity: 0.65;
    }
    
    .growth-metrics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1rem;
    }
    
    .growth-metrics-grid.north-star-grid {
      grid-template-columns: 1fr;
      max-width: 400px;
    }
    
    .growth-metric-card {
      background: rgba(255,255,255,0.6);
      border-radius: 12px;
      padding: 1.25rem;
      border: 1px solid rgba(0,0,0,0.08);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }
    
    .growth-metric-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .theme-dark .growth-metric-card {
      background: rgba(0,0,0,0.3);
      border-color: rgba(255,255,255,0.1);
    }
    
    .theme-dark .growth-metric-card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    
    .growth-metric-card.north-star {
      background: linear-gradient(135deg, rgba(158,239,128,0.2) 0%, rgba(99,102,241,0.15) 100%);
      border: 2px solid rgba(158,239,128,0.3);
    }
    
    .theme-dark .growth-metric-card.north-star {
      background: linear-gradient(135deg, rgba(158,239,128,0.15) 0%, rgba(99,102,241,0.1) 100%);
      border-color: rgba(158,239,128,0.25);
    }
    
    .metric-label {
      font-size: 0.85rem;
      font-weight: 600;
      opacity: 0.75;
      margin-bottom: 0.5rem;
    }
    
    .metric-value-row {
      display: flex;
      align-items: baseline;
      gap: 0.5rem;
      flex-wrap: wrap;
    }
    
    .metric-value {
      font-size: 1.75rem;
      font-weight: 800;
      color: #333;
      line-height: 1;
    }
    
    .theme-dark .metric-value {
      color: #fff;
    }
    
    .metric-delta {
      font-size: 0.9rem;
      font-weight: 600;
      padding: 0.15rem 0.4rem;
      border-radius: 4px;
    }
    
    .metric-delta.positive {
      color: #16a34a;
      background: rgba(22, 163, 74, 0.15);
    }
    
    .metric-delta.negative {
      color: #dc2626;
      background: rgba(220, 38, 38, 0.15);
    }
    
    .metric-delta.neutral {
      color: #6b7280;
      background: rgba(107, 114, 128, 0.15);
    }
    
    .metric-target-container {
      margin-top: 0.75rem;
    }
    
    .metric-target-bar {
      position: relative;
      height: 6px;
      background: rgba(0,0,0,0.1);
      border-radius: 3px;
      overflow: visible;
    }
    
    .theme-dark .metric-target-bar {
      background: rgba(255,255,255,0.15);
    }
    
    .metric-target-progress {
      height: 100%;
      background: linear-gradient(90deg, #9eef80 0%, #22c55e 100%);
      border-radius: 3px;
      transition: width 0.3s ease;
    }
    
    .metric-target-line {
      position: absolute;
      top: -3px;
      width: 2px;
      height: 12px;
      background: #6366f1;
      border-radius: 1px;
      transform: translateX(-1px);
    }
    
    .metric-target-label {
      margin-top: 0.5rem;
      font-size: 0.75rem;
      color: #6366f1;
      font-weight: 500;
    }
    
    .theme-dark .metric-target-label {
      color: #a5b4fc;
    }
    
    .metric-subline {
      margin-top: 0.5rem;
      font-size: 0.75rem;
      opacity: 0.6;
      line-height: 1.3;
    }
    
    /* Growth Row Title Line */
    .growth-row-title-line {
      display: flex;
      align-items: center;
      gap: 1rem;
      flex-wrap: wrap;
    }
    
    .growth-row-title-line h3 {
      margin: 0;
    }
    
    /* Verdict Badges */
    .verdict-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.35rem 0.75rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      line-height: 1.2;
      max-width: 100%;
    }
    
    .verdict-badge.verdict-healthy {
      background: rgba(22, 163, 74, 0.15);
      color: #16a34a;
      border: 1px solid rgba(22, 163, 74, 0.25);
    }
    
    .verdict-badge.verdict-watch {
      background: rgba(234, 179, 8, 0.15);
      color: #b45309;
      border: 1px solid rgba(234, 179, 8, 0.25);
    }
    
    .verdict-badge.verdict-action {
      background: rgba(220, 38, 38, 0.15);
      color: #dc2626;
      border: 1px solid rgba(220, 38, 38, 0.25);
    }
    
    .theme-dark .verdict-badge.verdict-healthy {
      background: rgba(34, 197, 94, 0.2);
      color: #4ade80;
      border-color: rgba(34, 197, 94, 0.3);
    }
    
    .theme-dark .verdict-badge.verdict-watch {
      background: rgba(250, 204, 21, 0.2);
      color: #fbbf24;
      border-color: rgba(250, 204, 21, 0.3);
    }
    
    .theme-dark .verdict-badge.verdict-action {
      background: rgba(239, 68, 68, 0.2);
      color: #f87171;
      border-color: rgba(239, 68, 68, 0.3);
    }
    
    .verdict-emoji {
      font-size: 0.9rem;
      flex-shrink: 0;
    }
    
    .verdict-label {
      font-weight: 700;
      white-space: nowrap;
    }
    
    .verdict-description {
      opacity: 0.85;
      font-weight: 500;
    }
    
    /* Responsive adjustments for Growth tab */
    @media (max-width: 768px) {
      .growth-row {
        padding: 1rem;
      }
      
      .growth-metrics-grid {
        grid-template-columns: 1fr;
      }
      
      .growth-metrics-grid.north-star-grid {
        max-width: 100%;
      }
      
      .metric-value {
        font-size: 1.5rem;
      }
      
      .growth-row-title-line {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }
      
      .verdict-badge {
        flex-wrap: wrap;
      }
      
      .verdict-description {
        flex-basis: 100%;
        margin-top: 0.15rem;
      }
    }

    /* Players Tab */
    .admin-players-controls {
      display: flex;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    
    .admin-search-input {
      flex: 1;
      padding: 0.75rem 1rem;
      font-size: 1rem;
      border: 2px solid rgba(0,0,0,0.1);
      border-radius: 8px;
      background: rgba(255,255,255,0.5);
      color: inherit;
    }
    
    .theme-dark .admin-search-input {
      border-color: rgba(255,255,255,0.1);
      background: rgba(0,0,0,0.2);
    }
    
    .admin-search-input:focus {
      outline: none;
      border-color: #9eef80;
    }
    
    .admin-sort-select {
      padding: 0.75rem 1rem;
      font-size: 1rem;
      border: 2px solid rgba(0,0,0,0.1);
      border-radius: 8px;
      background: rgba(255,255,255,0.5);
      color: inherit;
      cursor: pointer;
    }
    
    .theme-dark .admin-sort-select {
      border-color: rgba(255,255,255,0.1);
      background: rgba(0,0,0,0.2);
    }
    
    .admin-players-count {
      font-size: 0.875rem;
      opacity: 0.6;
      margin-bottom: 1rem;
    }

    /* Players Table */
    .admin-players-table {
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid rgba(0,0,0,0.1);
    }
    
    .theme-dark .admin-players-table {
      border-color: rgba(255,255,255,0.1);
    }
    
    .admin-players-header {
      display: grid;
      grid-template-columns: 2fr 1fr 0.8fr 0.8fr 0.8fr 0.8fr 0.8fr 1.2fr;
      gap: 0.5rem;
      padding: 1rem;
      background: rgba(0,0,0,0.05);
      font-weight: 600;
      font-size: 0.8rem;
    }
    
    .theme-dark .admin-players-header {
      background: rgba(255,255,255,0.05);
    }
    
    .admin-player-row {
      display: grid;
      grid-template-columns: 2fr 1fr 0.8fr 0.8fr 0.8fr 0.8fr 0.8fr 1.2fr;
      gap: 0.5rem;
      padding: 1rem;
      border-top: 1px solid rgba(0,0,0,0.05);
      cursor: pointer;
      transition: background 0.2s;
      font-size: 0.9rem;
    }
    
    .theme-dark .admin-player-row {
      border-top-color: rgba(255,255,255,0.05);
    }
    
    .admin-player-row:hover {
      background: rgba(0,0,0,0.03);
    }
    
    .theme-dark .admin-player-row:hover {
      background: rgba(255,255,255,0.03);
    }
    
    .admin-player-name {
      font-weight: 600;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    
    .admin-col-name {
      min-width: 0;
      overflow: hidden;
    }
    
    .admin-col-last {
      text-align: right;
    }
    
    .admin-player-email-small {
      font-size: 0.75rem;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      opacity: 0.6;
    }

    /* Player Detail Modal */
    .admin-modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 2rem;
    }
    
    .admin-modal-content {
      background: #f6e6d9;
      border-radius: 16px;
      padding: 2rem;
      max-width: 600px;
      width: 100%;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
      color: #331922;
    }
    
    .theme-dark .admin-modal-content {
      background: #1a1a2e;
      color: #f0f0f0;
    }
    
    .admin-modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      font-size: 2rem;
      cursor: pointer;
      opacity: 0.5;
      line-height: 1;
    }
    
    .admin-modal-close:hover {
      opacity: 1;
    }
    
    .admin-modal-content h2 {
      margin: 0 0 0.25rem;
    }
    
    .admin-modal-content h3 {
      margin: 1.5rem 0 0.75rem;
    }
    
    .admin-player-email {
      opacity: 0.7;
      margin: 0 0 0.25rem;
    }
    
    .admin-player-uid {
      font-size: 0.75rem;
      opacity: 0.5;
      font-family: monospace;
      margin: 0;
    }
    
    .admin-player-stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1rem;
      margin-top: 1.5rem;
    }
    
    .admin-player-stat {
      text-align: center;
      padding: 1rem;
      background: rgba(0,0,0,0.05);
      border-radius: 8px;
    }
    
    .theme-dark .admin-player-stat {
      background: rgba(255,255,255,0.05);
    }
    
    .admin-player-stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: #9eef80;
    }
    
    .theme-light .admin-player-stat-value {
      color: #331922;
    }
    
    .admin-player-stat-label {
      font-size: 0.75rem;
      opacity: 0.7;
    }
    
    .admin-player-difficulty-stats {
      display: flex;
      gap: 2rem;
    }

    /* Activity Grid */
    .admin-activity-grid {
      display: flex;
      gap: 4px;
      flex-wrap: wrap;
    }
    
    .admin-activity-day {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.625rem;
    }
    
    .admin-activity-played {
      background: rgba(158, 239, 128, 0.3);
      border: 2px solid #9eef80;
    }
    
    .admin-activity-missed {
      background: rgba(0,0,0,0.05);
      border: 2px solid transparent;
    }
    
    .theme-dark .admin-activity-missed {
      background: rgba(255,255,255,0.05);
    }
    
    .admin-activity-legend {
      display: flex;
      gap: 1rem;
      margin-top: 0.5rem;
      font-size: 0.75rem;
      opacity: 0.7;
    }

    /* Badges List */
    .admin-badges-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    
    .admin-badge-item {
      background: rgba(0,0,0,0.05);
      padding: 0.5rem 0.75rem;
      border-radius: 20px;
      font-size: 0.875rem;
    }
    
    .theme-dark .admin-badge-item {
      background: rgba(255,255,255,0.1);
    }
    
    .admin-no-badges {
      opacity: 0.5;
      font-style: italic;
    }

    /* Leaderboard Tab */
    .admin-leaderboard-tab h2 {
      margin-top: 0;
      margin-bottom: 1.5rem;
    }
    
    .admin-leaderboard-table {
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid rgba(0,0,0,0.1);
    }
    
    .theme-dark .admin-leaderboard-table {
      border-color: rgba(255,255,255,0.1);
    }
    
    .admin-leaderboard-header {
      display: grid;
      grid-template-columns: 50px 2fr 1fr 0.8fr 1fr 1fr 0.8fr;
      gap: 0.5rem;
      padding: 1rem;
      background: rgba(0,0,0,0.05);
      font-size: 0.85rem;
      font-weight: 600;
      font-size: 0.875rem;
    }
    
    .theme-dark .admin-leaderboard-header {
      background: rgba(255,255,255,0.05);
    }
    
    .admin-leaderboard-row {
      display: grid;
      grid-template-columns: 50px 2fr 1fr 0.8fr 1fr 1fr 0.8fr;
      gap: 0.5rem;
      padding: 1rem;
      border-top: 1px solid rgba(0,0,0,0.05);
      font-size: 0.9rem;
    }
    
    .theme-dark .admin-leaderboard-row {
      border-top-color: rgba(255,255,255,0.05);
    }
    
    .admin-leaderboard-row.admin-top-three {
      background: rgba(158, 239, 128, 0.1);
    }
    
    .admin-lb-col-rank {
      font-size: 1.25rem;
      text-align: center;
    }
    
    .admin-lb-col-name {
      font-weight: 600;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      min-width: 0;
    }
    
    .admin-lb-col-score {
      font-weight: 700;
      color: #9eef80;
      text-align: right;
    }
    
    .admin-lb-col-winrate {
      text-align: right;
    }
    
    .theme-light .admin-lb-col-score {
      color: #331922;
    }
    
    .admin-no-data {
      padding: 2rem;
      text-align: center;
      opacity: 0.5;
    }

    /* Clickable metric cards */
    .admin-metrics-hint {
      font-size: 0.875rem;
      opacity: 0.6;
      margin-bottom: 1rem;
    }
    
    .admin-metric-clickable {
      cursor: pointer;
      position: relative;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .admin-metric-clickable:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    
    .admin-metric-chart-icon {
      position: absolute;
      top: 8px;
      right: 8px;
      font-size: 0.875rem;
      opacity: 0.4;
    }
    
    .admin-metric-clickable:hover .admin-metric-chart-icon {
      opacity: 1;
    }
    
    /* Stickiness card - purple accent */
    .admin-metric-stickiness {
      background: linear-gradient(135deg, rgba(192, 132, 252, 0.15) 0%, rgba(147, 51, 234, 0.1) 100%);
      border: 1px solid rgba(147, 51, 234, 0.2);
    }
    
    .theme-dark .admin-metric-stickiness {
      background: linear-gradient(135deg, rgba(192, 132, 252, 0.2) 0%, rgba(147, 51, 234, 0.15) 100%);
      border-color: rgba(192, 132, 252, 0.3);
    }
    
    .admin-metric-stickiness .admin-metric-value {
      color: #9333ea;
    }
    
    .theme-dark .admin-metric-stickiness .admin-metric-value {
      color: #c084fc;
    }

    /* Metric Chart Modal */
    .metric-chart-modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 1rem;
    }
    
    .metric-chart-modal {
      background: #f6e6d9;
      border-radius: 16px;
      padding: 1.5rem;
      max-width: 800px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      color: #331922;
    }
    
    .theme-dark .metric-chart-modal {
      background: #1a1a2e;
      color: #f0f0f0;
    }
    
    .metric-chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    
    .metric-chart-header h2 {
      margin: 0;
      font-size: 1.5rem;
    }
    
    .metric-chart-close {
      background: none;
      border: none;
      font-size: 2rem;
      cursor: pointer;
      opacity: 0.5;
      line-height: 1;
      padding: 0;
    }
    
    .metric-chart-close:hover {
      opacity: 1;
    }
    
    .metric-chart-controls {
      margin-bottom: 1rem;
    }
    
    .metric-chart-time-select {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      border: 2px solid rgba(0,0,0,0.1);
      border-radius: 8px;
      background: rgba(255,255,255,0.5);
      color: inherit;
      cursor: pointer;
    }
    
    .theme-dark .metric-chart-time-select {
      border-color: rgba(255,255,255,0.1);
      background: rgba(0,0,0,0.2);
    }
    
    .metric-chart-summary {
      display: flex;
      gap: 1.5rem;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }
    
    .metric-chart-stat {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0.75rem 1.25rem;
      background: rgba(0,0,0,0.05);
      border-radius: 8px;
    }
    
    .theme-dark .metric-chart-stat {
      background: rgba(255,255,255,0.05);
    }
    
    .metric-chart-stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: #9eef80;
    }
    
    .theme-light .metric-chart-stat-value {
      color: #331922;
    }
    
    .metric-chart-stat-label {
      font-size: 0.75rem;
      opacity: 0.7;
    }
    
    .metric-chart-container {
      background: rgba(0,0,0,0.02);
      border-radius: 12px;
      padding: 1rem;
    }
    
    .theme-dark .metric-chart-container {
      background: rgba(255,255,255,0.02);
    }
    
    /* Chart Tooltip */
    .metric-chart-tooltip {
      background: #fff;
      border: 1px solid rgba(0,0,0,0.1);
      border-radius: 8px;
      padding: 0.5rem 0.75rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    
    .theme-dark .metric-chart-tooltip {
      background: #1a1a2e;
      border-color: rgba(255,255,255,0.1);
    }
    
    .metric-chart-tooltip-label {
      font-size: 0.75rem;
      opacity: 0.7;
      margin: 0 0 0.25rem;
    }
    
    .metric-chart-tooltip-value {
      font-size: 1.125rem;
      font-weight: 700;
      color: #9eef80;
      margin: 0;
    }
    
    .theme-light .metric-chart-tooltip-value {
      color: #331922;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .admin-header {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
      }
      
      .admin-header-left {
        flex-direction: column;
        gap: 0.5rem;
      }
      
      /* Players tab mobile: Only Player and Last Played */
      .admin-players-header,
      .admin-player-row {
        grid-template-columns: 1fr 1fr;
      }
      
      .admin-col-score,
      .admin-col-played,
      .admin-col-winrate,
      .admin-col-streak,
      .admin-col-maxstreak,
      .admin-col-solved {
        display: none;
      }
      
      .admin-col-last {
        display: block;
      }
      
      /* Leaderboard tab mobile: Only Rank, Player, Score, Win % */
      .admin-leaderboard-header,
      .admin-leaderboard-row {
        grid-template-columns: 32px 2fr 1fr 1fr;
      }
      
      .admin-leaderboard-header .admin-lb-col-rank {
        font-size: 0.7rem;
      }
      
      .admin-lb-col-rank {
        font-size: 1rem;
      }
      
      .admin-lb-col-played,
      .admin-lb-col-streak,
      .admin-lb-col-maxstreak {
        display: none;
      }
      
      .admin-lb-col-winrate {
        display: block;
      }
      
      .admin-player-stats-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .admin-difficulty-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }
    }

    /* Medium screens - Admin Dashboard */
    @media (min-width: 900px) {
      .admin-players-header,
      .admin-player-row {
        grid-template-columns: 2fr 1fr 0.8fr 0.8fr 0.8fr 0.8fr 1.2fr;
      }
      
      .admin-col-played,
      .admin-col-maxstreak,
      .admin-col-last {
        display: block;
      }
      
      .admin-col-solved {
        display: none;
      }
      
      .admin-leaderboard-header,
      .admin-leaderboard-row {
        grid-template-columns: 50px 2fr 1fr 0.8fr 1fr 1fr 0.8fr;
      }
      
      .admin-lb-col-played,
      .admin-lb-col-maxstreak,
      .admin-lb-col-winrate {
        display: block;
      }
    }

    /* Large Desktop - Admin Dashboard */
    @media (min-width: 1200px) {
      .admin-content {
        max-width: 1400px;
        padding: 2.5rem;
      }
      
      .admin-metrics-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 1.5rem;
      }
      
      .admin-metric-card {
        padding: 2rem;
      }
      
      .admin-metric-value {
        font-size: 2.25rem;
      }
      
      .metric-chart-modal {
        max-width: 1000px;
      }
      
      .admin-players-header,
      .admin-player-row {
        grid-template-columns: 2fr 1fr 0.8fr 0.8fr 0.8fr 0.8fr 0.8fr 1.2fr;
      }
      
      .admin-col-played,
      .admin-col-maxstreak,
      .admin-col-solved,
      .admin-col-last {
        display: block;
      }
      
      .admin-leaderboard-header,
      .admin-leaderboard-row {
        grid-template-columns: 60px 2fr 1fr 0.8fr 1fr 1fr 0.8fr;
      }
      
      .admin-lb-col-played,
      .admin-lb-col-maxstreak,
      .admin-lb-col-winrate {
        display: block;
      }
    }

    /* Extra Large Desktop - Admin Dashboard */
    @media (min-width: 1600px) {
      .admin-content {
        max-width: 1600px;
        padding: 3rem;
      }
      
      .admin-metric-value {
        font-size: 2.5rem;
      }
      
      .admin-metric-label {
        font-size: 1rem;
      }
      
      .admin-players-header,
      .admin-player-row {
        grid-template-columns: 2.5fr 1fr 0.8fr 0.8fr 0.8fr 0.8fr 0.8fr 1.5fr;
        gap: 1rem;
      }
      
      .admin-leaderboard-header,
      .admin-leaderboard-row {
        grid-template-columns: 70px 2.5fr 1fr 0.8fr 1fr 1fr 0.8fr;
        gap: 1rem;
        padding: 1.25rem 1.5rem;
      }
      
      .admin-streak-distribution {
        max-width: 800px;
      }
      
      .admin-difficulty-rates {
        max-width: 900px;
      }
      
      .metric-chart-container {
        padding: 1.5rem;
      }
    }

    /* Ultrawide Desktop - Admin Dashboard */
    @media (min-width: 1920px) {
      .admin-content {
        max-width: 1800px;
        padding: 3rem 4rem;
      }
      
      .admin-header {
        padding: 1.5rem 4rem;
      }
      
      .admin-tabs {
        padding: 0 4rem;
      }
      
      .admin-metrics-grid {
        gap: 2rem;
      }
      
      .admin-metric-card {
        padding: 2.5rem;
        border-radius: 16px;
      }
      
      .admin-metric-value {
        font-size: 3rem;
      }
    }

  </style>
</head>
<body>
  <div id="root"></div>
  <div id="firebase-config-warning" style="display: none;">
    <b>Action Required:</b> Firebase not configured. Set VITE_FIREBASE_* environment variables in your .env file.
  </div>
  
  <script type="module" src="/index.tsx"></script>
</body>
</html>